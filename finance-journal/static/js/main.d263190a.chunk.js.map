{"version":3,"sources":["hoc/Layout/Layout.js","components/Title/Title.js","components/UI/Button/Button.js","hoc/Modal/Modal.js","components/CompaniesList/CompaniesList.js","components/UI/Input/Input.js","hoc/Modal/FadeBg.js","components/Preloader/Preloader.js","redux/actions/actionsType.js","axios/axios-settings.js","Modules/formValidation.js","redux/reducers/mainReducer/actions.js","container/Main/Main.js","components/DepoDateAndAmount/DepoDateAndAmount.js","container/Deposit/DepoInnerWrapper/DepoInnerWrapper.js","redux/reducers/depositReducer/actions.js","container/Deposit/Deposit.js","components/LinksInsideSidebar/LinksInsideSidebar.js","components/SidebarNavigation/SidebarNavigation.js","components/Header/Header.js","redux/reducers/authReducer/actions.js","container/Auth/Auth.js","App.js","serviceWorker.js","redux/reducers/mainReducer/mainReducer.js","redux/reducers/depositReducer/depositReducer.js","redux/reducers/authReducer/authReducer.js","redux/reducers/rootReducers.js","index.js","container/Deposit/Deposit.module.scss","container/Main/Main.module.scss","components/CompaniesList/CompaniesList.module.scss","components/UI/Input/Input.module.scss","hoc/Modal/Modal.module.scss","container/Deposit/DepoInnerWrapper/DepoInnerWrapper.module.scss","container/Auth/Auth.module.scss","components/Title/Title.module.scss","components/UI/Button/Button.module.scss","components/Header/Header.module.scss","hoc/Layout/Layout.module.scss","components/Preloader/Preloader.module.scss","components/DepoDateAndAmount/DepoDateAndAmount.module.scss","components/SidebarNavigation/SidebarNavigation.module.scss","components/LinksInsideSidebar/LinksInsideSidebar.module.scss"],"names":["Layout","className","classes","this","props","children","React","Component","Title","titleH","title","Button","cls","classses","forEach","item","push","disabled","onClick","join","name","Modal","CompaniesList","header","companies","companyArr","currency","key","afterTax","Math","random","arrItem","row","datatype","CompanyName","showModalHandlerDelete","count","dividendPerShare","ceil","renderCompanies","beforeTax","bt","footer","Total","renderFooter","Input","valid","Error","InputWrapper","htmlFor","label","type","id","onChange","placeholder","autoComplete","autocomplete","value","redText","touched","errorMessage","FadeBg","Preloader","RENDER","axios","create","baseURL","validateControl","validation","isValid","required","trim","is","number","email","minLength","length","dispatch","getState","a","async","state","mainReducer","get","authReducer","token","response","undefined","data","portfolio","showPreloader","status","Object","keys","companyName","crc","includes","console","error","openModal","e","modalName","modals","openCreateModal","nameForDelete","openUpdateModal","target","parentNode","querySelector","textContent","closeModal","formAddInputs","control","isFormValid","reload","Main","map","inputName","index","inputObj","getCompanyData","infoTitle","tableWrapper","clickOnCompany","noCompany","addSection","isOpenModalAddCompany","Fragment","MainModalTitle","onSubmit","createCompany","renderInputs","selectHandler","isOpenModalUpdateCompany","deleteModal","modalDeleteBtnBox","deleteCompany","updateCompany","connect","JSON","parse","stringify","preventDefault","company","patch","put","delete","assign","formUpdInputs","parent","inputsObj","Inputs","getCompanyDataChangeHandler","DepoDateAndAmount","newDep","depo","sort","b","Date","date","obj","data-currency","data-year","getFullYear","data-id","li","day","getDate","month","toLocaleDateString","slice","amount","toLocaleString","DepoInnerWrapper","isOpen","showMoreHandler","setState","year","currName","currencyArr","DepoCurrency","depositReducer","renderDeposit","deposit","Deposit","onChangeHandler","createDeposit","inputsBox","renderInpus","selected","depositData","handleChangeDate","datePicker","maxDate","select","depoAndStatistic","noDeposit","DepoYear","showModal","delModalTitle","modalButtons","deleteDeposit","arr","formAddDepoInputs","amountInput","result","filter","dataset","inputs","controlName","LinksInsideSidebar","to","SidebarNavigation","logout","localStorage","removeItem","Header","logoutLink","href","Auth","input","authChangeHandler","greetings","authForm","renderInput","btnContainer","loginHandler","bind","authInputs","isLogin","inputEmail","inputPassword","password","returnSecureToken","url","post","localId","setItem","App","autoLogin","exact","path","component","localID","getItem","Boolean","window","location","hostname","match","createOptionForAddInputs","errMessage","config","createOptionForUpdInputs","initState","user","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunk","app","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"mUAaeA,E,iLARd,OACC,yBAAKC,UAAWC,IAAQF,QACtBG,KAAKC,MAAMC,c,GAJMC,IAAMC,W,kCCAdC,EAAQ,SAAAJ,GACpB,OACC,yBAAKH,UAAWC,IAAQM,OACvB,wBAAIP,UAAWC,IAAQO,QACrBL,EAAMM,S,iBCJEC,EAAS,SAAAP,GACrB,IAAMQ,EAAM,CAACV,IAAQS,QAGrB,OAFAP,EAAMS,SAASC,SAAQ,SAAAC,GAAI,OAAIH,EAAII,KAAKd,IAAQa,OAG/C,4BAAQE,UAAWb,EAAMa,SAAUC,QAASd,EAAMc,QAASjB,UAAWW,EAAIO,KAAK,MAC7Ef,EAAMgB,O,iBCNGC,EAAQ,SAAAjB,GACpB,IAAMQ,EAAM,CAACV,IAAQmB,OAQrB,OANKjB,EAAMF,SAGVE,EAAMF,QAAQY,SAAQ,SAAAC,GAAI,OAAIH,EAAII,KAAKd,IAAQa,OAI/C,yBAAKd,UAAWW,EAAIO,KAAK,MACvBf,EAAMC,W,iBC6EKiB,EAxFO,SAAAlB,GAsErB,OACC,yBAAKH,UAAWC,IAAQoB,eACvB,yBAAKrB,UAAWC,IAAQqB,QACvB,qGACA,iEACA,kFACA,kGA1EqB,SAACC,GACxB,IAAMC,EAAa,GAEnB,IAAK,IAAIL,KAAQI,EAEhB,GAAIpB,EAAMsB,WAAaF,EAAUJ,GAAMM,SAAvC,CAEA,IAAMC,EAAG,UAAMvB,EAAMwB,SAAZ,cAA0BC,KAAKC,UAElCC,EACL,yBAAK9B,UAAWC,IAAQ8B,IAAKL,IAAKA,GACjC,0BAAMM,SAAS,OAAOhC,UAAWC,IAAQgC,YACtChB,QAASd,EAAM+B,wBAAyBf,GAC3C,0BAAMa,SAAS,SAAST,EAAUJ,GAAMgB,OACxC,0BAAMH,SAAS,oBAAoBT,EAAUJ,GAAMiB,kBACnD,8BAAOR,KAAKS,KAAKd,EAAUJ,GAAMgB,MAAQZ,EAAUJ,GAAMiB,iBAAmB,KAAO,MAIrFZ,EAAWT,KAAKe,GAGjB,OAAON,EAuDLc,CAAgBnC,EAAMoB,WApDzB,SAAsBA,GACrB,IAAMC,EAAa,GAEfe,EAAY,EACZZ,EAAW,EAEf,IAAK,IAAIR,KAAQI,EAChB,GAAIpB,EAAMsB,WAAaF,EAAUJ,GAAMM,SAAvC,CAEA,IAAMe,EAAKjB,EAAUJ,GAAMgB,MAAQZ,EAAUJ,GAAMiB,iBAGnDG,GAAYC,EACZb,GAHWa,EAAW,IAALA,EAMlB,IAAMV,EACL,yBAAKJ,IAAKC,EAAU3B,UAAWC,IAAQwC,QACtC,yBAAKzC,UAAWC,IAAQyC,OACtB,yKAGD,8BACGd,KAAKS,KAAmB,IAAbE,GAAoB,MAInC,yBAAKvC,UAAWC,IAAQyC,OACtB,2LAID,0BAAM1C,UAAWC,IAAQ0B,UACtBC,KAAKS,KAAkB,IAAZV,GAAmB,OAOpC,OADAH,EAAWT,KAAKe,GACTN,EAeLmB,CAAaxC,EAAMoB,a,iBClFVqB,EAAQ,SAAAzC,GACpB,IAAMQ,EAAM,CAACV,IAAQ2C,OAWrB,OATKzC,EAAMF,SAEVE,EAAMF,QAAQY,SAAQ,SAAAC,GAAI,OAAIH,EAAII,KAAKd,IAAQa,OAG3CX,EAAM0C,OACVlC,EAAII,KAAKd,IAAQ6C,OAIjB,yBAAK9C,UAAWC,IAAQ8C,cACvB,2BACCC,QAAS7C,EAAM6C,SACd7C,EAAM8C,OAER,2BACCjD,UAAWW,EAAIO,KAAK,KACpBgC,KAAM/C,EAAM+C,MAAQ,OACpBC,GAAIhD,EAAM6C,QACVI,SAAUjD,EAAMiD,SAChBC,YAAalD,EAAMkD,YACnBC,aAAcnD,EAAMoD,aACpBC,MAAOrD,EAAMqD,QAGd,0BAAMxD,UAAWC,IAAQwD,UAEtBtD,EAAM0C,OAAS1C,EAAMuD,QACnBvD,EAAMwD,cAAgB,2JACtB,QChCKC,EAAS,SAAAzD,GACrB,OACC,yBAAKc,QAASd,EAAMc,QAASjB,UAAWC,IAAQ2D,U,iBCFrCC,EAAY,SAAA1D,GACxB,OACC,yBAAKH,UAAWC,IAAQ4D,WACvB,6BACC,8BACA,iC,+CCRSC,EAAS,S,iBCEPC,MAAMC,OAAO,CAC3BC,QAAS,qD,iBCqBH,SAASC,EAAgBV,EAAOW,GACtC,IAAKA,EAAY,OAAO,EAExB,IAAIC,GAAU,EAed,OAbID,EAAWE,WACdD,EAA2B,KAAjBZ,EAAMc,QAAiBF,GAEV,WAApBD,EAAWjB,OACdkB,EAAUG,IAAGC,QAAQhB,IAAUY,GAER,UAApBD,EAAWjB,OACdkB,EAAUG,IAAGE,MAAMjB,IAAUY,GAE1BD,EAAWO,YACdN,EAAUD,EAAWO,WAAalB,EAAMmB,QAAUP,GAG5CA,EC7BD,SAAS9B,IACf,OAAO,SAAOsC,EAAUC,GAAjB,qBAAAC,EAAAC,OAAA,uDACAC,EAAQH,IAAWI,YADnB,oBAAAH,EAAA,MAKkBf,EAAMmB,IAAN,WAAcL,IAAWM,YAAYC,MAArC,WALlB,UAKCC,EALD,YASaC,KAFX/D,EAAa8D,EAASE,KAAKC,UAA3BjE,WAPF,uBAUJqD,EAAS,CAAC1B,KAAMY,EAAQ2B,eAAe,IAVnC,0BAeChE,EAfD,YAegBuD,EAAMvD,UAEH,MAApB4D,EAASK,SAEZd,EAAS,CAAC1B,KAAMY,EAAQvC,YAAWkE,eAAe,IAGlDE,OAAOC,KAAKrE,GAAWV,SAAQ,SAAAgF,GAC9B,IAAMC,EAAMvE,EAAUsE,GAAapE,SAC9BA,EAASsE,SAASD,IAAMrE,EAASV,KAAK+E,MAG5ClB,EAAS,CAAC1B,KHxCF,WGwCkBzB,cA3BtB,kDA8BLuE,QAAQC,MAAR,MA9BK,0DA6LD,SAASC,EAAUC,EAAGC,GAC5B,OAAO,SAACxB,EAAUC,GACjB,IAAMG,EAAQH,IAAWI,YACnBoB,EAAM,eAAOrB,EAAMqB,SAEzBA,EAAOD,IAAa,EAGF,6BAAdA,GAMJxB,EAUA,SAAyByB,GACxB,MAAO,CACNnD,KHhOiB,oBGiOjBmD,UAbOC,CAAgBD,IAJxBzB,EAMD,SAAyByB,EAAQE,GAChC,MAAO,CACNrD,KHxNiB,oBGyNjBmD,SACAE,iBAVQC,CAAgBH,EADHF,EAAEM,OAAOC,WAAWC,cAAc,QAAQC,eAwB5D,SAASC,EAAWV,EAAGC,GAC7B,OAAO,SAACxB,EAAUC,GACjB,IAAMG,EAAQH,IAAWI,YAEnBoB,EAAM,eAAOrB,EAAMqB,QACnBS,EAAa,eAAO9B,EAAM8B,eAEhCT,EAAOD,IAAa,EAIpBT,OAAOC,KAAKkB,GAAejG,SAAQ,SAAAM,GAClC,IAAM4F,EAAO,eAAOD,EAAc3F,IAClC4F,EAAQlE,OAAQ,EAChBkE,EAAQrD,SAAU,EAClBqD,EAAQvD,MAAQ,GAChBsD,EAAc3F,GAAQ4F,KAGvBnC,EAGQ,CACN1B,KH5PW,cG6PXmD,SAAQS,gBAAeE,aAfP,KA4BpB,SAASC,EAAOrC,GACfA,EAAS,CAAC1B,KH/QO,iBG+QeuC,eAAe,IAC/Cb,EAAStC,KACTsC,EAASiC,EAAW,EAAM,6B,IC/PrBK,E,qLACQ/F,GAAO,IAAD,OAClB,OAAOwE,OAAOC,KAAK1F,KAAKC,MAAMgB,IAAOgG,KAAI,SAACC,EAAWC,GACpD,IAAMC,EAAW,EAAKnH,MAAMgB,GAAMiG,GAElC,OACC,kBAAC,EAAD,CACC1F,IAAK0F,EAAYC,EACjBnE,KAAMoE,EAASpE,KACfM,MAAO8D,EAAS9D,MAChBvD,QAASqH,EAAStH,UAClBgD,QAASoE,EAAYC,EACrBxE,MAAOyE,EAASzE,MAChBa,QAAS4D,EAAS5D,QAClBT,MAAOqE,EAASrE,MAChBU,aAAc2D,EAAS3D,aACvBJ,aAAc+D,EAAS/D,aACvBH,SAAU,SAAA+C,GAAC,OAAI,EAAKhG,MAAMoH,eAAepB,EAAGiB,EAAWjG,W,0CAO1DjB,KAAKC,MAAMmC,oB,+BAGF,IAAD,OACR,OACC,yBAAKtC,UAAWC,IAAQiH,MACvB,kBAAC,EAAD,CAAOzG,MAAM,0FACb,wBAAIT,UAAWC,IAAQuH,WAAvB,kHAECtH,KAAKC,MAAMsF,cACR,kBAAC,EAAD,MACAE,OAAOC,KAAK1F,KAAKC,MAAMoB,WAAWoD,OAAS,EAE7CzE,KAAKC,MAAMsB,SAAS0F,KAAI,SAAC1F,EAAU4F,GAClC,OACC,yBAAKrH,UAAWC,IAAQwH,aAAc/F,IAAK2F,GAC1C,4BAAK5F,GACL,kBAAC,EAAD,CACCA,SAAUA,EACVF,UAAW,EAAKpB,MAAMoB,UACtBW,uBAAwB,SAAAiE,GAAC,OAAI,EAAKhG,MAAMuH,eAAevB,UAKzD,yBAAKnG,UAAWC,IAAQ0H,WAAxB,kLAEJ,yBAAK3H,UAAWC,IAAQ2H,YACvB,kBAAC,EAAD,CACChH,SAAU,CAAC,SACXO,KAAK,oGACLF,QAAS,SAAAkF,GAAC,OAAI,EAAKhG,MAAM+F,UAAUC,EAAG,0BACtCnF,UAAU,KAKXd,KAAKC,MAAMkG,OAAOwB,sBAEjB,kBAAC,IAAMC,SAAP,KACC,kBAAC,EAAD,KACC,wBAAI9H,UAAWC,IAAQ8H,gBAAvB,qGAEA,0BAAMC,SAAU9H,KAAKC,MAAM8H,eAEzB/H,KAAKgI,aAAa,iBAEnB,4BAAQ9E,SAAUlD,KAAKC,MAAMgI,eAC5B,4BAAQ3E,MAAM,OAAd,OACA,4BAAQA,MAAM,OAAd,QAED,kBAAC,EAAD,CACCxC,SAAUd,KAAKC,MAAM6G,YACrBpG,SAAU,CAAC,QACXO,KAAK,kGAIR,kBAAC,EAAD,CAAQF,QAAS,SAAAkF,GAAC,OAAI,EAAKhG,MAAM0G,WAAWV,EAAG,6BAE9C,KAIHjG,KAAKC,MAAMkG,OAAO+B,yBAEjB,kBAAC,IAAMN,SAAP,KACC,kBAAC,EAAD,KACC,wBAAI9H,UAAWC,IAAQoI,aAAvB,sGACqBnI,KAAKC,MAAMoG,cADhC,KAICrG,KAAKgI,aAAa,iBAEnB,yBAAKlI,UAAWC,IAAQqI,mBAEvB,kBAAC,EAAD,CACCnH,KAAK,6CACLP,SAAU,CAAC,OACXK,QAAS,SAAAkF,GAAC,OAAI,EAAKhG,MAAMoI,cAAc,EAAKpI,MAAMoG,gBAClDvF,SAAUd,KAAKC,MAAM6G,cAGtB,kBAAC,EAAD,CACC7F,KAAK,mDACLP,SAAU,CAAC,SACXK,QAASf,KAAKC,MAAMqI,cACpBxH,SAAUd,KAAKC,MAAM6G,gBAIxB,kBAAC,EAAD,CAAQ/F,QAAS,SAAAkF,GAAC,OAAI,EAAKhG,MAAM0G,WAAWV,EAAG,gCAE9C,U,GArHW9F,IAAMC,WA+IVmI,oBAnBf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMC,iBAGxC,SAA4BL,GAC3B,MAAO,CACNtC,gBAAiB,kBAAMsC,EAAStC,MAChC2F,cAAe,SAAA9B,GAAC,OAAIvB,EDvGf,SAAuBuB,GAG7B,OAFAA,EAAE0C,iBAEK,SAAOjE,EAAUC,GAAjB,MAGGb,EAHH,yBAAAc,EAAAC,OAAA,uDAGGf,EAHH,SAGU7C,EAAMgB,EAAOC,EAAkBX,GAC9C,OAAO,eACLN,EAAO,CACPgB,QACAC,mBACAX,cAPGuD,EAAQH,IAAWI,YADnB,WAc6CD,EAAM8D,QAAjD3H,EAdF,EAcEA,KAAMgB,EAdR,EAcQA,MAAOC,EAdf,EAceA,iBAAkBX,EAdjC,EAciCA,SAChCqH,EAAU9E,EAAO7C,EAAMgB,EAAOC,EAAkBX,GAfjD,WAAAqD,EAAA,MAiBkBf,EAAMgF,MAAN,WAAgBlE,IAAWM,YAAYC,MAAvC,6BAAyE0D,IAjB3F,OAmBmB,MAnBnB,OAmBQpD,SACNW,EADsB,eACTrB,EAAMqB,QACnBS,EAFsB,eAEF9B,EAAM8B,eAChCT,EAAOwB,uBAAwB,EAG/BlC,OAAOC,KAAKkB,GAAejG,SAAQ,SAAAM,GAClC,IAAM4F,EAAO,eAAOD,EAAc3F,IAClC4F,EAAQvD,MAAQ,GAChBsD,EAAc3F,GAAQ4F,KAGvBnC,EAAS,CAAC1B,KHlFI,iBGkFkB4F,UAASzC,SAAQS,kBACjDlC,EAAStC,MAhCL,kDAmCL0D,QAAQC,MAAR,MAnCK,0DCoGuBgC,CAAc9B,KAC3CqC,cAAe,kBAAM5D,GD/Bf,SAAOA,EAAUC,GAAjB,yBAAAC,EAAAC,OAAA,uDACAC,EAAQH,IAAWI,YADnB,EAEkCD,EAAM8D,QAAvC3H,EAFD,EAECA,KAAMgB,EAFP,EAEOA,MAAOC,EAFd,EAEcA,iBAFd,WAAA0C,EAAA,MAIiBf,EAAMiF,IAAN,WAAcnE,IAAWM,YAAYC,MAArC,gCAAkEjE,EAAlE,eAAqFgB,IAJtG,cAIAkD,EAJA,kBAAAP,EAAA,MAKAf,EAAMiF,IAAN,WAAcnE,IAAWM,YAAYC,MAArC,gCAAkEjE,EAAlE,0BAAgGiB,IALhG,OAOkB,MAApBiD,EAASK,QACZuB,EAAOrC,GARF,yCCgCN2D,cAAe,SAAApH,GAAI,OAAIyD,EDlBlB,SAAuBzD,GAC7B,OAAO,SAAOyD,EAAUC,GAAjB,SAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACiBf,EAAMkF,OAAN,WAAiBpE,IAAWM,YAAYC,MAAxC,gCAAqEjE,EAArE,WADjB,OAGkB,MAHlB,OAGOuE,QACZuB,EAAOrC,GAJF,sCCiB0B2D,CAAcpH,KAC9CuG,eAAgB,SAAAvB,GAAC,OAAIvB,ED9DhB,SAAwBuB,GAC9B,OAAO,SAACvB,EAAUC,GACjB,IAAMG,EAAQH,IAAWI,YACnB6D,EAAUnD,OAAOuD,OAAO,GAAIlE,EAAM8D,SAClCK,EAAa,eAAOnE,EAAMmE,eAC1BhH,EAAK,eAAOgH,EAAchH,OAC1BC,EAAgB,eAAO+G,EAAc/G,kBACrCgH,EAASjD,EAAEM,OAAOC,WAExBoC,EAAQ3H,KAAOgF,EAAEM,OAAOG,YACxBkC,EAAQ3G,MAAQA,EAAMqB,MAAQ4F,EAAOzC,cAAc,0BAA0BC,YAC7EkC,EAAQ1G,iBAAmBA,EAAiBoB,MAAQ4F,EAAOzC,cAAc,qCAAqCC,YAE9GuC,EAAchH,MAAQA,EACtBgH,EAAc/G,iBAAmBA,EAEjCwC,EAAS,CACR1B,KHzGiB,mBG0GjB4F,UACAK,gBACAnC,aAAa,IAGdpC,EAASsB,EAAUC,EAAG,8BCuCQuB,CAAevB,KAC7CoB,eAAgB,SAACpB,EAAGiB,EAAWiC,GAAf,OAA6BzE,EDNxC,SAAqCuB,EAAGiB,EAAWiC,GACzD,OAAO,SAACzE,EAAUC,GAAc,IAAD,EACxBG,EAAQH,IAAWI,YACnB6D,EAAO,eAAO9D,EAAM8D,SACpBQ,EAAM,eAAOtE,EAAMqE,IAEnBtC,EAAO,eAAOuC,EAAOlC,IAG3BL,EAAQrD,SAAU,EAClBqD,EAAQvD,MAAQ2C,EAAEM,OAAOjD,MACzBuD,EAAQlE,MAAQqB,EAAgB6C,EAAQvD,MAAOuD,EAAQ5C,YAEvDmF,EAAOlC,GAAaL,EACpB+B,EAAQ1B,GAAajB,EAAEM,OAAOjD,MAC9BsF,EAAQrH,SAAW,MAEnB,IAAIuF,GAAc,EAGlBrB,OAAOC,KAAK0D,GAAQzI,SAAQ,SAAAM,GAC3B6F,EAAcsC,EAAOnI,GAAM0B,OAASmE,KAGrCpC,GAAQ,GACP1B,KH1KiB,mBG2KjB4F,WAFO,cAGNO,EAAYC,GAHN,4BAIPtC,GAJO,KClB8CuC,CAA4BpD,EAAGiB,EAAWiC,KAChGnD,UAAW,SAACC,EAAGC,GAAJ,OAAkBxB,EAASsB,EAAUC,EAAGC,KACnDS,WAAY,SAACV,EAAGC,GAAJ,OAAkBxB,EAASiC,EAAWV,EAAGC,KACrD+B,cAAe,SAAAhC,GAAC,OAAIvB,EDyBf,SAAuBuB,GAC7B,OAAO,SAACvB,EAAUC,GACjB,IAAMG,EAAQH,IAAWI,YAEnB6D,EAAO,eAAO9D,EAAM8D,SAC1BA,EAAQrH,SAAW0E,EAAEM,OAAOjD,MAE5BoB,EAAS,CAAC1B,KHxLK,gBGwLgB4F,aChCFX,CAAchC,QAI9BsC,CAA6CvB,G,4DC7H7CsC,GApCW,SAAArJ,GACzB,IAEMsJ,EAFMtJ,EAAMuJ,KAECC,MAAK,SAAC7E,EAAG8E,GAAJ,OAAU,IAAIC,KAAK/E,EAAEgF,MAAQ,IAAID,KAAKD,EAAEE,SAWhE,OACC,kBAAC,IAAMhC,SAAP,KAEE2B,EAAOtC,KAAI,SAAC4C,EAAK1C,GAChB,OACC,wBAAIpG,QAASd,EAAMc,QAAS+I,gBAAe7J,EAAMsB,SAAUwI,YAAW,IAAIJ,KAAKE,EAAID,MAAMI,cAAeC,UAASJ,EAAI5G,GAAInD,UAAWC,KAAQmK,GAAI1I,IAAK2F,GACpJ,8BAfU,SAAAyC,GACf,IAAMO,EAAM,IAAIR,KAAKC,GAAMQ,UACvBC,EAAQ,IAAIV,KAAKC,GAAMU,mBAAmB,KAAM,CAACD,MAAO,SAI5D,MAFU,6BAAVA,EAAmBA,GAAS,IAAMA,EAAQA,EAAME,MAAM,EAAGF,EAAM5F,OAAS,GAAK,SAEtE,CAAC0F,EAAKE,GAAOrJ,KAAK,KAUlBoJ,CAAQP,EAAID,OAGd,8BACEC,EAAIW,OAAOC,eAAe,MAD5B,IACuD,QAAnBxK,EAAMsB,SAAqB,qBAA2B,QAAnBtB,EAAMsB,SAAqB,IAAM,YCtBzGmJ,G,2MACL5F,MAAQ,CACP6F,QAAQ,G,EAGTC,gBAAkB,kBAAM,EAAKC,SAAS,CAACF,QAAS,EAAK7F,MAAM6F,U,wEAEjD,IAAD,OACR,OACC,6BACC,uBAAG5J,QAASf,KAAK4K,gBAAiB9K,UAAWC,KAAQ+K,MACnD9K,KAAKC,MAAM6K,KADb,uBAIA,yBAAKhL,UAAWC,KAAQwB,UACtBvB,KAAK8E,MAAM6F,OAGVlF,OAAOC,KAAK1F,KAAKC,MAAMsB,UAAU0F,KAAI,SAAC8D,EAAU5D,GAE/C,IAAM6D,EAAc,EAAK/K,MAAMsB,SAASwJ,GAExC,OACC,yBAAKvJ,IAAK2F,EAAOrH,UAAWC,KAAQkL,cACnC,wBAAInL,UAAWC,KAAQkB,MAAoB,QAAb8J,EAAqB,iCAAuB,QAAbA,EAAqB,6CAAY,MAE9F,4BACC,kBAAC,GAAD,CACChK,QAAS,EAAKd,MAAMc,QACpBQ,SAAUwJ,EACVvB,KAAMwB,SAMV,W,GApCuB7K,IAAMC,WAsDtBmI,oBAXf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMoG,oBAGxC,SAA4BxG,GAC3B,MAAO,KAKO6D,CAA6CmC,I,2BCvDrD,SAASS,KACf,OAAO,SAAOzG,EAAUC,GAAjB,mBAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACiBf,EAAMmB,IAAN,WAAcL,IAAWM,YAAYC,MAArC,WADjB,UACAC,EADA,gBAICI,GAAgB,EAEA,OAAlBJ,EAASE,KANR,uBAOY,KAChBX,EAAS,CAAC1B,KAAMY,EAAQwH,QADR,KACiB7F,kBAR7B,0BAYE6F,EAAWjG,EAASE,KAAKC,UAAzB8F,QACP1G,EAAS,CAAC1B,KAAMY,EAAQwH,UAAS7F,kBAb5B,kDAeLO,QAAQC,MAAR,MAfK,0D,ICgBFsF,G,oLACOnE,GAAY,IAAD,OACtB,OAAOzB,OAAOC,KAAK1F,KAAKC,MAAMiH,IAAYD,KAAI,SAAChG,EAAMkG,GACpD,IAAMC,EAAW,EAAKnH,MAAMiH,GAAWjG,GAEvC,OACC,kBAAC,EAAD,CACCO,IAAKP,EAAOkG,EACZnE,KAAMoE,EAASpE,KACfM,MAAO8D,EAAS9D,MAChBvD,QAASqH,EAAStH,UAClBgD,QAAS7B,EAAOkG,EAChBxE,MAAOyE,EAASzE,MAChBa,QAAS4D,EAAS5D,QAClBT,MAAOqE,EAASrE,MAChBI,YAAaiE,EAASjE,YACtBM,aAAc2D,EAAS3D,aACvBJ,aAAc+D,EAAS/D,aACvBH,SAAU,SAAA+C,GAAC,OAAI,EAAKhG,MAAMqL,gBAAgBrF,EAAGhF,EAAMiG,W,0CAOtDlH,KAAKC,MAAMkL,kB,+BAGF,IAAD,OACR,OACC,yBAAKrL,UAAWC,KAAQsL,SAEvB,6BACC,kBAAC,EAAD,CAAO9K,MAAM,sGAEb,wBAAIT,UAAWC,KAAQuH,WAAvB,iHAIA,0BAAMQ,SAAU9H,KAAKC,MAAMsL,eAC1B,yBAAKzL,UAAWC,KAAQyL,WAEtBxL,KAAKyL,YAAY,qBAElB,kBAAC,KAAD,CACCC,SAAU1L,KAAKC,MAAM0L,YAAY/B,KAEjC1G,SAAUlD,KAAKC,MAAM2L,iBACrB9L,UAAWC,KAAQ8L,WACnBC,QAAS,IAAInC,OAGd,4BAAQ7J,UAAWC,KAAQgM,OAAQ7I,SAAUlD,KAAKC,MAAMgI,eACvD,4BAAQ3E,MAAM,OAAd,OACA,4BAAQA,MAAM,OAAd,SAIF,kBAAC,EAAD,CACC5C,SAAU,CAAC,QAAS,WACpBO,KAAK,gHACLH,SAAUd,KAAKC,MAAM6G,gBAMxB,yBAAKhH,UAAWC,KAAQiM,kBAEvB,wBAAIlM,UAAWC,KAAQuH,WAAvB,+KAECtH,KAAKC,MAAMsF,cACR,kBAAC,EAAD,MACuB,OAAvBvF,KAAKC,MAAMmL,QACX,yBAAKtL,UAAWC,KAAQkM,WAAxB,2JACA,yBAAKnM,UAAWC,KAAQmM,UAExBzG,OAAOC,KAAK1F,KAAKC,MAAMmL,SAASnE,KAAI,SAAC6D,EAAM3D,GAC1C,IAAM5F,EAAW,EAAKtB,MAAMmL,QAAQN,GAEpC,OAAO,kBAAC,GAAD,CACN/J,QAAS,EAAKd,MAAM+F,UACpBzE,SAAUA,EACVuJ,KAAMA,EACN3D,MAAOA,EACP3F,IAAK2F,SAUXnH,KAAKC,MAAMkM,UACR,kBAAC,IAAMvE,SAAP,KACD,kBAAC,EAAD,KACC,wBAAI9H,UAAWC,KAAQqM,eAAvB,6LACA,yBAAKtM,UAAWC,KAAQsM,cACvB,kBAAC,EAAD,CACC3L,SAAU,CAAC,OACXO,KAAK,6CACLH,UAAU,EACVC,QAASf,KAAKC,MAAMqM,gBAErB,kBAAC,EAAD,CACC5L,SAAU,CAAC,SACXO,KAAK,uCACLH,UAAU,EACVC,QAASf,KAAKC,MAAM0G,eAIvB,kBAAC,EAAD,CAAQ5F,QAASf,KAAKC,MAAM0G,cAE3B,U,GApHcxG,IAAMC,WA8IbmI,oBAnBf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMoG,oBAGxC,SAA4BxG,GAC3B,MAAO,CACNyG,cAAe,kBAAMzG,EAASyG,OAC9BI,cAAe,SAACtF,GAAD,OAAOvB,ED9HjB,SAAuBuB,GAG7B,OAFAA,EAAE0C,iBAEK,SAAOjE,EAAUC,GAAjB,uCAAAC,EAAAC,OAAA,uDACAC,EAAQH,IAAWuG,eADnB,EAE2BpG,EAAM6G,YAAhC/B,EAFD,EAECA,KAAMY,EAFP,EAEOA,OAAQjJ,EAFf,EAEeA,SACfuJ,EAAO,IAAInB,KAAKC,GAAMI,cAHtB,WAAApF,EAAA,MAIYf,EAAMmB,IAAN,WAAcL,IAAWM,YAAYC,MAArC,8BAAgE4F,EAAhE,YAAwEvJ,EAAxE,WAJZ,UAIAgL,EAJA,OAKAhH,GAAgB,EAChBiH,EANA,eAMwB1H,EAAM0H,oBAC9BC,EAPA,eAOkBD,EAAkBhC,SAE9BlH,MAAQ,GACpBkJ,EAAkBhC,OAASiC,EAGV,OAAbF,EAAIlH,KAbF,wBAcCA,EAAO,IAERxE,KAAK,CACT2J,QAASA,EACTZ,KAAMA,EACN3G,GAAIoC,EAAKZ,OAAS/C,KAAKC,WAnBnB,YAAAiD,EAAA,MAsBkBf,EAAMiF,IAAN,WAAcnE,IAAWM,YAAYC,MAArC,8BAAgE4F,EAAhE,YAAwEvJ,EAAxE,SAAyF8D,IAtB3G,eAsBCF,EAtBD,QAuBe,EAEI,MAApBA,EAASK,SACZd,EAAS,CAAC1B,KAAMY,EAAQ2B,gBAAeuB,aAHpB,EAGiC0F,sBACpD9H,EAASyG,OA3BL,kCAkCNoB,EAAIlH,KAAKxE,KAAK,CACb2J,QAASA,EACTZ,KAAMA,EACN3G,GAAIsJ,EAAIlH,KAAKZ,OAAS/C,KAAKC,WArCtB,YAAAiD,EAAA,MAwCiBf,EAAMiF,IAAN,WAAcnE,IAAWM,YAAYC,MAArC,8BAAgE4F,EAAhE,YAAwEvJ,EAAxE,SAAyFgL,EAAIlH,OAxC9G,QAwCAF,EAxCA,QAyCc,EAEI,MAApBA,EAASK,SACZd,EAAS,CAAC1B,KAAMY,EAAQ2B,gBAAeuB,aAHpB,EAGiC0F,sBACpD9H,EAASyG,OA7CJ,uCC2HyBI,CAActF,KAC7CqG,cAAe,SAACrG,GAAD,OAAOvB,GDxEhB,SAAOA,EAAUC,GAAjB,yBAAAC,EAAAC,OAAA,uDACAC,EAAQH,IAAWuG,eAEnB3F,GAAgB,EAChB4G,GAAY,EACZ9G,EALA,eAKWP,EAAMO,MALjB,WAAAT,EAAA,MAOiBf,EAAMmB,IAAN,WAAcL,IAAWM,YAAYC,MAArC,8BAAgEG,EAAKyF,KAArE,YAA6EzF,EAAK9D,SAAlF,WAPjB,UASuB,KAFvB4D,EAPA,QASOE,KAAKZ,OATZ,oCAAAG,EAAA,MAUaf,EAAMkF,OAAN,WAAiBpE,IAAWM,YAAYC,MAAxC,8BAAmEG,EAAKyF,KAAxE,YAAgFzF,EAAK9D,SAArF,WAVb,QAYc,MAZd,OAYGiE,SACPd,EAAS,CAAC1B,KAAMY,EAAQ2B,gBAAe4G,cACvCzH,EAASyG,OAdL,+BAiBCuB,EAASvH,EAASE,KAAKsH,QAAO,SAAA/L,GAAI,OAAIA,EAAKqC,MAAQoC,EAAKpC,MAjBzD,YAAA2B,EAAA,MAkBaf,EAAMiF,IAAN,WAAcnE,IAAWM,YAAYC,MAArC,8BAAgEG,EAAKyF,KAArE,YAA6EzF,EAAK9D,SAAlF,SAAmGmL,IAlBhH,QAoBc,MApBd,OAoBGlH,SACPd,EAAS,CAAC1B,KAAMY,EAAQ2B,gBAAe4G,cACvCzH,EAASyG,OAtBL,0CCyENnF,UAAW,SAAAC,GAAC,OAAIvB,ED1CX,SAAmBuB,GACzB,OAAO,SAAAvB,GAINA,EAAS,CAAC1B,KPlHE,aOkHgBmJ,WAFV,EAEqB9G,KAH1BY,EAAEM,OAAOqG,WCwCG5G,CAAUC,KACnCU,WAAY,SAAAV,GAAC,OAAIvB,GDjCX,SAAAA,GACNA,EAAS,CAAC1B,KPrHG,cOqHgBmJ,WAAW,QCiCxCb,gBAAiB,SAACrF,EAAGiB,EAAWE,GAAf,OAA4B1C,EDzBxC,SAAyBuB,EAAGiB,EAAWE,GAC7C,OAAO,SAAC1C,EAAUC,GAAc,IAAD,EACxBG,EAAQH,IAAWuG,eAEnBS,EAAW,eAAO7G,EAAM6G,aAExBkB,EAAM,eAAO/H,EAAMsC,IAEnB0F,EAAW,eAAOD,EAAO3F,IAG/B4F,EAAYtJ,SAAU,EACtBsJ,EAAYxJ,MAAQ2C,EAAEM,OAAOjD,MAC7BwJ,EAAYnK,MAAQqB,EAAgB8I,EAAYxJ,MAAOwJ,EAAY7I,YAEnE0H,EAAYzE,GAAajB,EAAEM,OAAOjD,MAClCuJ,EAAO3F,GAAa4F,EAEpB,IAAIhG,GAAc,EAGlBrB,OAAOC,KAAKmH,GAAQlM,SAAQ,SAAAM,GAC3B6F,EAAc+F,EAAO5L,GAAM0B,OAASmE,KAGrCpC,GAAQ,GACP1B,KPrJU,YOsJV2I,eAFO,cAGNvE,EAAWyF,GAHL,4BAIP/F,GAJO,KCA8CwE,CAAgBrF,EAAGiB,EAAWE,KACpFwE,iBAAkB,SAAAhC,GAAI,OAAIlF,EDSrB,SAA0BkF,GAChC,OAAO,SAAClF,EAAUC,GACjB,IAAMG,EAAQH,IAAWuG,eACnBS,EAAW,eAAO7G,EAAM6G,aAG9BA,EAAY/B,KAAOD,KAAKlB,MAAMmB,GAC9BlF,EAAS,CAAC1B,KPtKK,gBOsKgB2I,iBChBIC,CAAiBhC,KACpD3B,cAAe,SAAAhC,GAAC,OAAIvB,EDmBf,SAAuBuB,GAC7B,OAAO,SAACvB,EAAUC,GACjB,IAAMG,EAAQH,IAAWuG,eACnBS,EAAW,eAAO7G,EAAM6G,aAC9BA,EAAYpK,SAAW0E,EAAEM,OAAOjD,MAEhCoB,EAAS,CAAC1B,KPhLK,gBOgLgB2I,iBCzBF1D,CAAchC,QAK9BsC,CAA6C8C,I,iDClJ7C0B,GAbY,SAAA9M,GAC1B,OACC,yBAAKH,UAAWC,KAAQgN,oBACvB,4BACC,kBAAC,KAAD,CAASC,GAAI,KAAb,iDAED,4BACC,kBAAC,KAAD,CAASA,GAAI,SAAb,qECAWC,OARf,WACC,OACC,yBAAKnN,UAAWC,KAAQkN,mBACvB,kBAAC,GAAD,Q,oBC6BY1E,oBAZf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMG,iBAGxC,SAA4BP,GAC3B,MAAO,CACNwI,OAAQ,SAACjH,GAAD,OAAOvB,EC2CV,SAAgBuB,GAGtB,OAFAA,EAAE0C,iBAEK,SAAAjE,GACNyI,aAAaC,WAAW,WACxB1I,EAAS,CAAC1B,KZlEG,iBWkBWkK,CAAOjH,QAKlBsC,EA/BA,SAAAtI,GACd,OACC,yBAAKH,UAAWC,KAAQsN,QACvB,gDAIiB,OAAhBpN,EAAMiF,MAEL,6BACC,uBAAGnE,QAASd,EAAMiN,OAAQpN,UAAWC,KAAQuN,WAAYC,KAAK,KAA9D,mCAEC,S,6BELDC,G,oLACOpG,GAAW,IAAD,OAErB,OAAO3B,OAAOC,KAAK1F,KAAKC,MAAMmH,IAAWH,KAAI,SAACC,EAAWC,GACxD,IAAMsG,EAAQ,EAAKxN,MAAMmH,GAAUF,GAEnC,OACC,kBAAC,EAAD,CACC1F,IAAK2F,EACLnE,KAAMyK,EAAMzK,KACZD,MAAO0K,EAAM1K,MACbU,aAAcgK,EAAMhK,aACpB3D,UAAW2N,EAAM3N,UACjBqD,YAAasK,EAAMtK,YACnBR,MAAO8K,EAAM9K,MACba,QAASiK,EAAMjK,QACfF,MAAOmK,EAAMnK,MACbW,WAAYwJ,EAAMxJ,WAClBf,SAAU,SAAA+C,GAAC,OAAI,EAAKhG,MAAMyN,kBAAkBzH,EAAGmB,EAAUF,W,+BAM5D,OACC,yBAAKpH,UAAWC,KAAQyN,MACvB,kBAAC,EAAD,CAAOjN,MAAO,iGACd,uBAAGT,UAAWC,KAAQ4N,WAAtB,wRAEA,yBAAK7N,UAAWC,KAAQ6N,UACvB,0BAAM9F,SAAU9H,KAAKC,MAAM2N,UACzB5N,KAAK6N,YAAY,cAElB,yBAAK/N,UAAWC,KAAQ+N,cACvB,kBAAC,EAAD,CACCpN,SAAU,CAAC,QAAS,aACpBO,KAAK,iCACLH,SAAUd,KAAKC,MAAM6G,YACrB/F,QAASf,KAAKC,MAAM8N,aAAaC,KAAKhO,MAAM,KAE7C,kBAAC,EAAD,CACCU,SAAU,CAAC,SAAU,WACrBO,KAAK,qEACLH,SAAUd,KAAKC,MAAM6G,YACrB/F,QAASf,KAAKC,MAAM8N,aAAaC,KAAKhO,MAAM,a,GA5CjCG,IAAMC,WAoEVmI,oBAdf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMG,iBAGxC,SAA4BP,GAC3B,MAAO,CACNgJ,kBAAmB,SAACzH,EAAGmB,EAAUF,GAAd,OAA4BxC,EDlC1C,SAA2BuB,EAAGmB,EAAUF,GAC9C,OAAO,SAACxC,EAAUC,GAAc,IAAD,EACxBG,EAAQH,IAAWM,YACnBgJ,EAAU,eAAOnJ,EAAMsC,IACvBqG,EAAK,eAAOQ,EAAW/G,IAE7BuG,EAAMjK,SAAU,EAChBiK,EAAMnK,MAAQ2C,EAAEM,OAAOjD,MACvBmK,EAAM9K,MAAQqB,EAAgByJ,EAAMnK,MAAOmK,EAAMxJ,YAEjDgK,EAAW/G,GAAauG,EAExB,IAAI3G,GAAc,EAGlBrB,OAAOC,KAAKuI,GAAYtN,SAAQ,SAAAM,GAC/B6F,EAAcmH,EAAWhN,GAAM0B,OAASmE,KAGzCpC,GAAQ,GAAE1B,KZ/Cc,cY+ChB,cAAqBoE,EAAW6G,GAAhC,4BAA4CnH,GAA5C,KCegD4G,CAAkBzH,EAAGmB,EAAUF,KACvF0G,SAAU,SAAC3H,GAAD,OAAOvB,ED1CZ,SAAkBuB,GAExB,OADAA,EAAE0C,iBACK,SAAAjE,KCwCoBkJ,CAAS3H,KACnC8H,aAAc,SAACG,GAAD,OAAaxJ,EDvEtB,SAAsBwJ,GAC5B,OAAO,SAAOxJ,EAAUC,GAAjB,2BAAAC,EAAAC,OAAA,mDACAC,EAAQH,IAAWM,YADnB,EAE8BH,EAAMmJ,WAAnCE,EAFD,EAECA,WAAYC,EAFb,EAEaA,cACb/I,EAAO,CACZd,MAAO4J,EAAW7K,MAClB+K,SAAUD,EAAc9K,MACxBgL,mBAAmB,IAKhBJ,EAXE,wBAYLK,EAAM,oHAZD,WAAA3J,EAAA,MAaYf,IAAM2K,KAAKD,EAAKlJ,IAb5B,OAaLF,EAbK,sCAgBLoJ,EAAM,wGAhBD,YAAA3J,EAAA,MAiBYf,IAAM2K,KAAKD,EAAKlJ,IAjB5B,QAiBLF,EAjBK,eAoBNT,EAAS,CAAC1B,KZbE,aYagBkC,MAAOC,EAASE,KAAKoJ,UAEjDtB,aAAauB,QAAQ,UAAWvJ,EAASE,KAAKoJ,SAtBxC,uCCsE8BV,CAAaG,QAKpC3F,CAA6CiF,ICpEtDmB,G,4LAGJ3O,KAAKC,MAAM2O,c,+BAIX,OACC,kBAAC,EAAD,KACC,kBAAC,GAAD,MAEC5O,KAAKC,MAAMiF,MAEV,yBAAKpF,UAAU,qBACd,kBAAC,GAAD,MAEA,yBAAKA,UAAW,qBACf,kBAAC,KAAD,KACC,kBAAC,KAAD,CAAO+O,OAAO,EAAMC,KAAM,IAAKC,UAAW/H,KAC1C,kBAAC,KAAD,CAAO8H,KAAM,QAASC,UAAW1D,KACjC,kBAAC,KAAD,CAAU2B,GAAI,IAAK+B,UAAW/H,QAKjC,yBAAKlH,UAAU,qBACd,kBAAC,KAAD,KACC,kBAAC,KAAD,CAAO+O,OAAK,EAACC,KAAM,QAASC,UAAWvB,KACvC,kBAAC,KAAD,CAAUR,GAAI,QAAS+B,UAAWvB,Y,GA5BxBpN,aAiDHmI,oBAXf,SAAyBzD,GAExB,OAAO0D,KAAKC,MAAMD,KAAKE,UAAU5D,EAAMG,iBAGxC,SAA4BP,GAC3B,MAAO,CACNkK,UAAW,kBAAMlK,GFMX,SAAAA,GACN,IAAMsK,EAAU7B,aAAa8B,QAAQ,WAGpCvK,EADGsK,EACM,CAAChM,KZrDM,kBYqDiBkC,MAAO8J,GAE/B,CAAChM,KZvDM,kBYuDiBkC,MAAO,cER5BqD,CAA6CoG,ICjDxCO,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,aCNN,SAASC,GAAyBtO,EAAMuO,EAAY3F,GACnD,OdVmC4F,EcUR,CACzB1M,MAAO9B,EACP+B,KAAM,OACNS,aAAc+L,EACd1P,UAAW,CAAC,IACZuD,aAAc,Odf2BY,EcgBvC4F,EdfG,eACH4F,EADJ,CAECxL,aACAtB,OAAQsB,EACRT,SAAS,EACTF,MAAO,KANF,IAA6BmM,EAAQxL,EcoB5C,SAASyL,GAAyBzO,EAAMuO,EAAY3F,GACnD,OdXmC4F,EcWR,CACzB1M,MAAO9B,EACP+B,KAAM,OACNS,aAAc+L,EACd1P,UAAW,CAAC,IACZuD,aAAc,OdhB2BY,EciBvC4F,EdhBG,eACH4F,EADJ,CAECxL,aACAtB,OAAO,EACPa,SAAS,EACTF,MAAO,KANF,IAA6BmM,EAAQxL,EcqB5C,IAAM0L,GAAY,CAEjBC,KAAM,KACNvJ,cAAe,GACfd,eAAe,EACfuB,aAAa,EACbX,OAAQ,CACPwB,uBAAuB,EACvBO,0BAA0B,GAE3BtB,cAAe,CACd3F,KAAMsO,GAAyB,sEAAgB,qIAA6B,CAACpL,UAAU,IACvFlC,MAAOsN,GAAyB,8FAAoB,4EAAiB,CAACpL,UAAU,EAAMnB,KAAM,WAC5Fd,iBAAkBqN,GAAyB,gIAA6B,4EAAiB,CACxFpL,UAAU,EACVnB,KAAM,YAGRiG,cAAe,CACdhH,MAAOyN,GAAyB,8FAAoB,4EAAiB,CAACvL,UAAU,EAAMnB,KAAM,WAC5Fd,iBAAkBwN,GAAyB,gIAA6B,4EAAiB,CACxFvL,UAAU,EACVnB,KAAM,YAGR4F,QAAS,CACR3H,KAAM,GACNgB,MAAO,GACPC,iBAAkB,GAClBX,SAAU,OAEXF,UAAW,GACXE,SAAU,IChEX,IAAMoO,GAAY,CAEjBC,KAAM,KACN9I,aAAa,EACbqF,WAAW,EACX5G,eAAe,EACf6F,QAAS,GACToB,kBAAmB,CAClBhC,OAAQ,CACPxH,KAAM,OACNS,aAAc,4EACd3D,UAAW,CAAC,gBACZqD,YAAa,4EACbE,aAAc,MACdV,OAAO,EACPa,SAAS,EACTF,MAAO,GACPW,WAAY,CACXE,UAAU,EACVnB,KAAM,YAIT2I,YAAa,CACZpK,SAAU,MACViJ,OAAQ,GACRZ,KAAMD,KAAKlB,MAAM,IAAIkB,OAEtBtE,KAAM,GACNsF,QAAQ,GC7BT,IAAMgF,GAAY,CACjBzK,MAAO,KACP4B,aAAa,EACbmH,WAAY,CACXE,WAAY,CACXnL,KAAM,QACND,MAAO,oDACPU,aAAc,oDACd3D,UAAW,CAAC,aACZqD,YAAa,oDACbE,aAAc,MACdV,OAAO,EACPa,SAAS,EACTF,MAAO,GACPW,WAAY,CACXE,UAAU,EACVnB,KAAM,UAGRoL,cAAe,CACdpL,KAAM,WACND,MAAO,kFACPU,aAAc,8LACd3D,UAAW,CAAC,aACZqD,YAAa,kFACbE,aAAc,MACdV,OAAO,EACPa,SAAS,EACTF,MAAO,GACPW,WAAY,CACXE,UAAU,EACVK,UAAW,MC5BAqL,oBAAgB,CAC9B9K,YHkEc,WAAiD,IAA5BD,EAA2B,uDAAnB6K,GAAWG,EAAQ,uCAC9D,OAAQA,EAAO9M,MACd,KAAKY,EACJ,OAAO,eACHkB,EADJ,GAEIgL,GAIL,IhBhFU,WgBiFT,OAAO,eACHhL,EADJ,CAECvD,SAAUuO,EAAOvO,WAGnB,IhBrFgB,iBgBsFf,OAAO,eACHuD,EADJ,CAEC8D,QAASkH,EAAOlH,QAChBzC,OAAQ2J,EAAO3J,OACfS,cAAekJ,EAAOlJ,gBAGxB,IhB5FgB,iBgB6Ff,OAAO,eACH9B,EADJ,CAECS,eAAe,IAGjB,IhB/FkB,mBgBgGjB,OAAO,eAAIT,EAAX,GAAqBgL,GAEtB,IhBnGmB,oBgBoGlB,OAAO,eACHhL,EADJ,CAECqB,OAAQ2J,EAAO3J,OACfE,cAAeyJ,EAAOzJ,gBAGxB,IhBxGa,cgByGZ,OAAO,eACHvB,EADJ,CAECqB,OAAQ2J,EAAO3J,OACfS,cAAekJ,EAAOlJ,cACtBE,YAAagJ,EAAOhJ,cAGtB,IhB/Ge,gBgBgHd,OAAO,eACHhC,EADJ,CAEC8D,QAASkH,EAAOlH,UAGlB,QACC,OAAO9D,IGxHIoG,eF4BC,WAAoD,IAA5BpG,EAA2B,uDAAnB6K,GAAWG,EAAQ,uCACjE,OAAQA,EAAO9M,MAEd,KAAKY,EAKL,IjBtCY,aiBuCX,OAAO,eACHkB,EADJ,GAEIgL,GAEL,IjBxCa,ciByCZ,OAAO,eACHhL,EADJ,CAECqH,WAAW,IAEb,IjB3CW,YiBgDX,IjBjDe,gBiBkDd,OAAO,eACHrH,EADJ,GAEIgL,GAGL,QACC,OAAOhL,IE1DoBG,YDkCf,WAAiD,IAA5BH,EAA2B,uDAAnB6K,GAAWG,EAAQ,uCAC9D,OAAQA,EAAO9M,MACd,IlB/BwB,akBgCvB,OAAO,eACH8B,EADJ,GAEIgL,GAEL,IlBnCY,akBwCZ,IlBtCiB,kBkBuChB,OAAO,eACHhL,EADJ,CAECI,MAAO4K,EAAO5K,QAEhB,IlB5Ca,ckB6CZ,OAAO,eACHJ,EADJ,CAECI,MAAO,OAET,QACC,OAAOJ,M,SElDJiL,GACa,kBAAXZ,QACPA,OAAOa,qCACNb,OAAOa,qCAAqC,IACvCC,KAIDC,GAAQC,aAAYC,GAAaL,GAAiBM,aAAgBC,QAIlEC,GACL,kBAAC,IAAD,CAAUL,MAAOA,IAChB,kBAAC,KAAD,KACC,kBAAC,GAAD,QAKHM,IAASC,OAAOF,GAAKG,SAASC,eAAe,SLkGvC,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB,mBMpInBC,EAAOC,QAAU,CAAC,UAAY,2BAA2B,iBAAmB,kCAAkC,gBAAkB,iCAAiC,UAAY,2BAA2B,WAAa,4BAA4B,OAAS,wBAAwB,SAAW,0BAA0B,UAAY,2BAA2B,aAAe,8BAA8B,cAAgB,iC,mBCA3ZD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,eAAiB,6BAA6B,gBAAkB,8BAA8B,WAAa,yBAAyB,kBAAoB,gCAAgC,YAAc,0BAA0B,aAAe,2BAA2B,UAAY,wBAAwB,UAAY,0B,mBCAtWD,EAAOC,QAAU,CAAC,IAAM,2BAA2B,OAAS,8BAA8B,YAAc,mCAAmC,MAAQ,6BAA6B,SAAW,gCAAgC,QAAU,+BAA+B,mBAAqB,4C,mBCAzRD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,aAAe,4BAA4B,MAAQ,qBAAqB,QAAU,uBAAuB,aAAe,8B,mBCAvKD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,mBCAxDD,EAAOC,QAAU,CAAC,KAAO,+BAA+B,SAAW,mCAAmC,aAAe,uCAAuC,KAAO,iC,mBCAnKD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,UAAY,wBAAwB,UAAY,wBAAwB,SAAW,uBAAuB,aAAe,6B,mBCArKD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,mBCAxDD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,MAAQ,sBAAsB,KAAO,qBAAqB,OAAS,uBAAuB,IAAM,oBAAoB,QAAU,0B,mBCAhLD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,6B,mBCA/DD,EAAOC,QAAU,CAAC,OAAS,yB,mBCA3BD,EAAOC,QAAU,CAAC,UAAY,+B,mBCA9BD,EAAOC,QAAU,CAAC,GAAK,gC,mBCAvBD,EAAOC,QAAU,CAAC,kBAAoB,+C,mBCAtCD,EAAOC,QAAU,CAAC,mBAAqB,kD","file":"static/js/main.d263190a.chunk.js","sourcesContent":["import React from \"react\";\r\nimport classes from \"./Layout.module.scss\";\r\n\r\nclass Layout extends React.Component {\r\n  render() {\r\n\treturn (\r\n\t\t<div className={classes.Layout}>\r\n\t\t\t{this.props.children}\r\n\t\t</div>\r\n\t);\r\n  }\r\n}\r\n\r\nexport default Layout;\r\n","import React from \"react\";\r\nimport classes from './Title.module.scss'\r\n\r\nexport const Title = props => {\r\n\treturn (\r\n\t\t<div className={classes.Title}>\r\n\t\t\t<h4 className={classes.titleH}>\r\n\t\t\t\t{props.title}\r\n\t\t\t</h4>\r\n\t\t</div>\r\n\t)\r\n};","import React from \"react\";\r\nimport classes from './Button.module.scss'\r\n\r\nexport const Button = props => {\r\n\tconst cls = [classes.Button];\r\n\tprops.classses.forEach(item => cls.push(classes[item]));\r\n\r\n\treturn (\r\n\t\t<button disabled={!props.disabled} onClick={props.onClick} className={cls.join(' ')}>\r\n\t\t\t{props.name}\r\n\t\t</button>\r\n\t)\r\n};","import React from \"react\";\r\nimport classes from './Modal.module.scss'\r\n\r\nexport const Modal = props => {\r\n\tconst cls = [classes.Modal];\r\n\r\n\tif (!props.classes) {\r\n\r\n\t} else {\r\n\t\tprops.classes.forEach(item => cls.push(classes[item]));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={cls.join(' ')}>\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t)\r\n};","import React from \"react\";\r\nimport classes from \"./CompaniesList.module.scss\";\r\n\r\nconst CompaniesList = props => {\r\n\t// Метод для вывода компаний на страницу\r\n\tconst renderCompanies = (companies) => {\r\n\t\tconst companyArr = [];\r\n\r\n\t\tfor (let name in companies) {\r\n\r\n\t\t\tif (props.currency !== companies[name].currency) continue;\r\n\r\n\t\t\tconst key = `${props.afterTax} + ${Math.random()}`;\r\n\r\n\t\t\tconst arrItem = (\r\n\t\t\t\t<div className={classes.row} key={key}>\r\n\t\t\t\t\t<span datatype=\"name\" className={classes.CompanyName}\r\n\t\t\t\t\t\t  onClick={props.showModalHandlerDelete}>{name}</span>\r\n\t\t\t\t\t<span datatype=\"count\">{companies[name].count}</span>\r\n\t\t\t\t\t<span datatype=\"dividendPerShare\">{companies[name].dividendPerShare}</span>\r\n\t\t\t\t\t<span>{Math.ceil(companies[name].count * companies[name].dividendPerShare * 100) / 100}</span>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n\t\t\tcompanyArr.push(arrItem);\r\n\t\t}\r\n\r\n\t\treturn companyArr\r\n\t};\r\n\t// Рендер футера с налогами\r\n\tfunction renderFooter(companies) {\r\n\t\tconst companyArr = [];\r\n\r\n\t\tlet beforeTax = 0;\r\n\t\tlet afterTax = 0;\r\n\r\n\t\tfor (let name in companies) {\r\n\t\t\tif (props.currency !== companies[name].currency) continue;\r\n\r\n\t\t\tconst bt = companies[name].count * companies[name].dividendPerShare;\r\n\t\t\tconst at = bt - (bt * 0.13);\r\n\r\n\t\t\tbeforeTax +=bt;\r\n\t\t\tafterTax +=at;\r\n\t\t}\r\n\r\n\t\tconst arrItem = (\r\n\t\t\t<div key={afterTax} className={classes.footer}>\r\n\t\t\t\t<div className={classes.Total}>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\tПрибыль до вычета налогов\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{Math.ceil((beforeTax) * 100) / 100}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={classes.Total}>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\tПрибыль после вычета налогов\r\n\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t<span className={classes.afterTax}>\r\n\t\t\t\t\t\t\t{Math.ceil((afterTax) * 100) / 100}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tcompanyArr.push(arrItem);\r\n\t\treturn companyArr\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.CompaniesList}>\r\n\t\t\t<div className={classes.header}>\r\n\t\t\t\t<span>Имя компании</span>\r\n\t\t\t\t<span>Акции </span>\r\n\t\t\t\t<span>Дивиденд</span>\r\n\t\t\t\t<span>Прибыль (год)</span>\r\n\t\t\t</div>\r\n\t\t\t{\r\n\t\t\t\trenderCompanies(props.companies)\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\trenderFooter(props.companies)\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default CompaniesList;\r\n","import React from \"react\";\r\nimport classes from './Input.module.scss'\r\n\r\nexport const Input = props => {\r\n\tconst cls = [classes.Input];\r\n\r\n\tif (!props.classes) {\r\n\t} else {\r\n\t\tprops.classes.forEach(item => cls.push(classes[item]))\r\n\t}\r\n\r\n\tif (!props.valid) {\r\n\t\tcls.push(classes.Error)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.InputWrapper}>\r\n\t\t\t<label\r\n\t\t\t\thtmlFor={props.htmlFor}\r\n\t\t\t>{props.label}</label>\r\n\r\n\t\t\t<input\r\n\t\t\t\tclassName={cls.join(' ')}\r\n\t\t\t\ttype={props.type || 'text'}\r\n\t\t\t\tid={props.htmlFor}\r\n\t\t\t\tonChange={props.onChange}\r\n\t\t\t\tplaceholder={props.placeholder}\r\n\t\t\t\tautoComplete={props.autocomplete}\r\n\t\t\t\tvalue={props.value}\r\n\t\t\t/>\r\n\r\n\t\t\t<span className={classes.redText}>\r\n\t\t\t\t{\r\n\t\t\t\t\t!props.valid && props.touched\r\n\t\t\t\t\t\t? props.errorMessage || \"Введите корректное значение\"\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t)\r\n};","import React from \"react\";\r\nimport classes from './Modal.module.scss'\r\n\r\nexport const FadeBg = props => {\r\n\treturn (\r\n\t\t<div onClick={props.onClick} className={classes.FadeBg}/>\r\n\t)\r\n};","import React from \"react\";\r\nimport classes from './Preloader.module.scss'\r\n\r\nexport const Preloader = props => {\r\n\treturn (\r\n\t\t<div className={classes.Preloader}>\r\n\t\t\t<div>\r\n\t\t\t\t<div/>\r\n\t\t\t\t<div/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n};","export const RENDER = \"RENDER\",\r\n\tCURRENCY = \"CURRENCY\",\r\n\tCREATE_COMPANY = \"CREATE_COMPANY\",\r\n\tSHOW_PRELOADER = \"SHOW_PRELOADER\",\r\n\tOPEN_MODAL = \"OPEN_MODAL\",\r\n\tOPEN_MODAL_UPDATE = \"OPEN_MODAL_UPDATE\",\r\n\tGET_COMPANY_DATA = \"GET_COMPANY_DATA\",\r\n\tCLOSE_MODAL = \"CLOSE_MODAL\",\r\n\tCHANGE_SELECT = \"CHANGE_SELECT\",\r\n\tON_CHANGE = \"ON_CHANGE\";\r\n\r\nexport const AUTH_INPUT = \"AUTH_INPUT\",\r\n\tAUTH_LOGIN = \"AUTH_LOGIN\",\r\n\tAUTH_LOGOUT = \"AUTH_LOGOUT\",\r\n\tAUTH_AUTO_LOGIN = \"AUTH_AUTO_LOGIN\";\r\n\r\n// Тут создаю типы для actions","import axios from 'axios'\r\n\r\nexport default axios.create({\r\n\tbaseURL: \"https://my-finance-journal.firebaseio.com/users/\"\r\n})","import is from \"is_js\";\r\n\r\n// 2 функции для инпутов на главной\r\nexport function createAddFormInputs(config, validation) {\r\n\treturn {\r\n\t\t...config,\r\n\t\tvalidation,\r\n\t\tvalid: !validation,\r\n\t\ttouched: false,\r\n\t\tvalue: \"\"\r\n\t}\r\n}\r\n\r\nexport function createUpdFormInputs(config, validation) {\r\n\treturn {\r\n\t\t...config,\r\n\t\tvalidation,\r\n\t\tvalid: true,\r\n\t\ttouched: true,\r\n\t\tvalue: \"\"\r\n\t}\r\n}\r\n\r\n// Валидация параметров из validation\r\nexport function validateControl(value, validation) {\r\n\tif (!validation) return true;\r\n\r\n\tlet isValid = true;\r\n\r\n\tif (validation.required) {\r\n\t\tisValid = value.trim() !== '' && isValid\r\n\t}\r\n\tif (validation.type === 'number') {\r\n\t\tisValid = is.number(+value) && isValid\r\n\t}\r\n\tif (validation.type === 'email') {\r\n\t\tisValid = is.email(value) && isValid\r\n\t}\r\n\tif (validation.minLength) {\r\n\t\tisValid = validation.minLength <= value.length && isValid\r\n\t}\r\n\r\n\treturn isValid\r\n}","import {\r\n\tCHANGE_SELECT,\r\n\tCLOSE_MODAL,\r\n\tCREATE_COMPANY,\r\n\tCURRENCY,\r\n\tGET_COMPANY_DATA,\r\n\tOPEN_MODAL_UPDATE,\r\n\tRENDER, SHOW_PRELOADER\r\n} from \"../../actions/actionsType\";\r\nimport axios from \"../../../axios/axios-settings\";\r\nimport {validateControl} from \"../../../Modules/formValidation\";\r\n\r\n// Асинхронная операция на сервер, рендерит список компаний\r\nexport function renderCompanies() {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\r\n\t\ttry {\r\n\t\t\t// Импорт портфеля пользователя\r\n\t\t\tconst response = await axios.get(`/${getState().authReducer.token}.json`);\r\n\t\t\t// Импорт компаний\r\n\t\t\tconst {companies} = response.data.portfolio;\r\n\r\n\t\t\tif (companies === undefined) {\r\n\t\t\t\tdispatch({type: RENDER, showPreloader: false});\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t// Количество валют\r\n\t\t\tconst currency = [...state.currency];\r\n\r\n\t\t\tif (response.status === 200) {\r\n\r\n\t\t\t\tdispatch({type: RENDER, companies, showPreloader: false});\r\n\r\n\t\t\t\t// Ищу сколько всего валют, пушу в массив новые валюты, получаю массив без дубликатов\r\n\t\t\t\tObject.keys(companies).forEach(companyName => {\r\n\t\t\t\t\tconst crc = companies[companyName].currency;\r\n\t\t\t\t\tif (!currency.includes(crc)) currency.push(crc)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({type: CURRENCY, currency})\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Создание компании\r\nexport function createCompany(e) {\r\n\te.preventDefault();\r\n\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\r\n\t\tfunction create(name, count, dividendPerShare, currency) {\r\n\t\t\treturn {\r\n\t\t\t\t[name]: {\r\n\t\t\t\t\tcount,\r\n\t\t\t\t\tdividendPerShare,\r\n\t\t\t\t\tcurrency\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst {name, count, dividendPerShare, currency} = state.company;\r\n\t\t\tconst company = create(name, count, dividendPerShare, currency);\r\n\r\n\t\t\tconst response = await axios.patch(`/${getState().authReducer.token}/portfolio/companies.json`, company);\r\n\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\tconst modals = {...state.modals};\r\n\t\t\t\tconst formAddInputs = {...state.formAddInputs};\r\n\t\t\t\tmodals.isOpenModalAddCompany = false;\r\n\r\n\t\t\t\t// очищаю инпут value, чтобы после добавления компании поля были пустыми\r\n\t\t\t\tObject.keys(formAddInputs).forEach(name => {\r\n\t\t\t\t\tconst control = {...formAddInputs[name]};\r\n\t\t\t\t\tcontrol.value = \"\";\r\n\t\t\t\t\tformAddInputs[name] = control;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdispatch({type: CREATE_COMPANY, company, modals, formAddInputs});\r\n\t\t\t\tdispatch(renderCompanies())\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//Собираю данные для редактирования/удаления компании (клик на имя компании)\r\nexport function clickOnCompany(e) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\t\tconst company = Object.assign({}, state.company);\r\n\t\tconst formUpdInputs = {...state.formUpdInputs};\r\n\t\tconst count = {...formUpdInputs.count};\r\n\t\tconst dividendPerShare = {...formUpdInputs.dividendPerShare};\r\n\t\tconst parent = e.target.parentNode;\r\n\r\n\t\tcompany.name = e.target.textContent;\r\n\t\tcompany.count = count.value = parent.querySelector(\"span[datatype='count']\").textContent;\r\n\t\tcompany.dividendPerShare = dividendPerShare.value = parent.querySelector(\"span[datatype='dividendPerShare']\").textContent;\r\n\r\n\t\tformUpdInputs.count = count;\r\n\t\tformUpdInputs.dividendPerShare = dividendPerShare;\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: GET_COMPANY_DATA,\r\n\t\t\tcompany,\r\n\t\t\tformUpdInputs,\r\n\t\t\tisFormValid: true\r\n\t\t});\r\n\r\n\t\tdispatch(openModal(e, \"isOpenModalUpdateCompany\"));\r\n\t}\r\n}\r\n\r\n// Обновление данных по компаниям\r\nexport function updateCompany() {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\t\tconst {name, count, dividendPerShare} = state.company;\r\n\r\n\t\tconst response = await axios.put(`/${getState().authReducer.token}/portfolio/companies/${name}/count.json`, count);\r\n\t\tawait axios.put(`/${getState().authReducer.token}/portfolio/companies/${name}/dividendPerShare.json`, dividendPerShare);\r\n\r\n\t\tif (response.status === 200) {\r\n\t\t\treload(dispatch)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Удаление компаний\r\nexport function deleteCompany(name) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst response = await axios.delete(`/${getState().authReducer.token}/portfolio/companies/${name}.json`);\r\n\r\n\t\tif (response.status === 200) {\r\n\t\t\treload(dispatch)\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/*----------START События для инпутов-------------*/\r\n\r\n// Событие onChange для инпута. Данные идут в state.company для будущей отправки на сервер\r\nexport function getCompanyDataChangeHandler(e, inputName, inputsObj) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\t\tconst company = {...state.company};\r\n\t\tconst Inputs = {...state[inputsObj]};\r\n\t\t// control - это name, count, dividensPerShare\r\n\t\tconst control = {...Inputs[inputName]};\r\n\r\n\t\t// Валидация\r\n\t\tcontrol.touched = true;\r\n\t\tcontrol.value = e.target.value;\r\n\t\tcontrol.valid = validateControl(control.value, control.validation);\r\n\r\n\t\tInputs[inputName] = control;\r\n\t\tcompany[inputName] = e.target.value;\r\n\t\tcompany.currency = \"USD\"; // Валюта по умолчанию\r\n\r\n\t\tlet isFormValid = true;\r\n\r\n\t\t// Валидация формы (активные кнопки или нет)\r\n\t\tObject.keys(Inputs).forEach(name => {\r\n\t\t\tisFormValid = Inputs[name].valid && isFormValid;\r\n\t\t});\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: GET_COMPANY_DATA,\r\n\t\t\tcompany,\r\n\t\t\t[inputsObj]: Inputs,\r\n\t\t\tisFormValid\r\n\t\t})\r\n\t}\r\n}\r\n\r\n//Событие onChange для select\r\nexport function selectHandler(e) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\r\n\t\tconst company = {...state.company};\r\n\t\tcompany.currency = e.target.value;\r\n\r\n\t\tdispatch({type: CHANGE_SELECT, company});\r\n\r\n\t\t// this.setState({company})\r\n\t}\r\n}\r\n\r\n/*----------END События для инпутов-------------*/\r\n\r\n/*----------START Функции закрытия и открытия модального окна-------------*/\r\n\r\n// Функция возвращает новую функцию, которая принимает dispatch или getState( и так далее\r\nexport function openModal(e, modalName) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\t\tconst modals = {...state.modals};\r\n\r\n\t\tmodals[modalName] = true;\r\n\r\n\t\t// Либо Я открываю окно для редактирования/удаления\r\n\t\tif (modalName === \"isOpenModalUpdateCompany\") {\r\n\t\t\tconst nameForDelete = e.target.parentNode.querySelector('span').textContent;\r\n\t\t\tdispatch(openUpdateModal(modals, nameForDelete));\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// Либо для новой компании\r\n\t\tdispatch(openCreateModal(modals));\r\n\r\n\t\tfunction openUpdateModal(modals, nameForDelete) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: OPEN_MODAL_UPDATE,\r\n\t\t\t\tmodals,\r\n\t\t\t\tnameForDelete\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction openCreateModal(modals) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: OPEN_MODAL_UPDATE,\r\n\t\t\t\tmodals\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function closeModal(e, modalName) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().mainReducer;\r\n\r\n\t\tconst modals = {...state.modals};\r\n\t\tconst formAddInputs = {...state.formAddInputs};\r\n\r\n\t\tmodals[modalName] = false;\r\n\r\n\t\tlet isFormValid = false;\r\n\r\n\t\tObject.keys(formAddInputs).forEach(name => {\r\n\t\t\tconst control = {...formAddInputs[name]};\r\n\t\t\tcontrol.valid = false;\r\n\t\t\tcontrol.touched = false;\r\n\t\t\tcontrol.value = \"\";\r\n\t\t\tformAddInputs[name] = control;\r\n\t\t});\r\n\r\n\t\tdispatch(closeModal(modals, formAddInputs, isFormValid));\r\n\r\n\t\tfunction closeModal() {\r\n\t\t\treturn {\r\n\t\t\t\ttype: CLOSE_MODAL,\r\n\t\t\t\tmodals, formAddInputs, isFormValid\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\n/*----------END Функции закрытия и открытия модального окна-------------*/\r\n\r\n\r\n/* --- Мои функции для сокращения количества кода ---*/\r\n\r\n// Функция для обновления данных и запуска preloader после обновления или удаления\r\nfunction reload(dispatch) {\r\n\tdispatch({type: SHOW_PRELOADER, showPreloader: true});\r\n\tdispatch(renderCompanies());\r\n\tdispatch(closeModal(null, \"isOpenModalUpdateCompany\"));\r\n}","import React from \"react\";\r\nimport classes from './Main.module.scss'\r\nimport {Title} from \"../../components/Title/Title\";\r\nimport {Button} from \"../../components/UI/Button/Button\";\r\nimport {Modal} from \"../../hoc/Modal/Modal\";\r\nimport CompaniesList from \"../../components/CompaniesList/CompaniesList\";\r\nimport {Input} from \"../../components/UI/Input/Input\";\r\nimport {FadeBg} from \"../../hoc/Modal/FadeBg\";\r\nimport {Preloader} from \"../../components/Preloader/Preloader\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n\tclickOnCompany,\r\n\tcloseModal,\r\n\tcreateCompany,\r\n\tdeleteCompany,\r\n\tgetCompanyDataChangeHandler,\r\n\topenModal,\r\n\trenderCompanies,\r\n\tselectHandler, updateCompany\r\n} from \"../../redux/reducers/mainReducer/actions\";\r\n\r\nclass Main extends React.Component {\r\n\trenderInputs(name) {\r\n\t\treturn Object.keys(this.props[name]).map((inputName, index) => {\r\n\t\t\tconst inputObj = this.props[name][inputName];\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tkey={inputName + index}\r\n\t\t\t\t\ttype={inputObj.type}\r\n\t\t\t\t\tvalue={inputObj.value}\r\n\t\t\t\t\tclasses={inputObj.className}\r\n\t\t\t\t\thtmlFor={inputName + index}\r\n\t\t\t\t\tvalid={inputObj.valid}\r\n\t\t\t\t\ttouched={inputObj.touched}\r\n\t\t\t\t\tlabel={inputObj.label}\r\n\t\t\t\t\terrorMessage={inputObj.errorMessage}\r\n\t\t\t\t\tautocomplete={inputObj.autocomplete}\r\n\t\t\t\t\tonChange={e => this.props.getCompanyData(e, inputName, name)}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t})\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.renderCompanies();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.Main}>\r\n\t\t\t\t<Title title=\"Список компаний\"/>\r\n\t\t\t\t<h2 className={classes.infoTitle}>Дивиденды в портфеле</h2>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.showPreloader\r\n\t\t\t\t\t\t? <Preloader/>\r\n\t\t\t\t\t\t: Object.keys(this.props.companies).length > 0\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\tthis.props.currency.map((currency, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className={classes.tableWrapper} key={index}>\r\n\t\t\t\t\t\t\t\t\t<h3>{currency}</h3>\r\n\t\t\t\t\t\t\t\t\t<CompaniesList\r\n\t\t\t\t\t\t\t\t\t\tcurrency={currency}\r\n\t\t\t\t\t\t\t\t\t\tcompanies={this.props.companies}\r\n\t\t\t\t\t\t\t\t\t\tshowModalHandlerDelete={e => this.props.clickOnCompany(e)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t: <div className={classes.noCompany}>Вы еще не завели ни одной компании</div>\r\n\t\t\t\t}\r\n\t\t\t\t<div className={classes.addSection}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassses={[\"green\"]}\r\n\t\t\t\t\t\tname=\"Добавить компанию\"\r\n\t\t\t\t\t\tonClick={e => this.props.openModal(e, \"isOpenModalAddCompany\")}\r\n\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* Модальное окно для добавления компании */}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.modals.isOpenModalAddCompany\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Modal>\r\n\t\t\t\t\t\t\t\t<h3 className={classes.MainModalTitle}>Добавить компанию</h3>\r\n\r\n\t\t\t\t\t\t\t\t<form onSubmit={this.props.createCompany}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.renderInputs(\"formAddInputs\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t<select onChange={this.props.selectHandler}>\r\n\t\t\t\t\t\t\t\t\t\t<option value=\"USD\">USD</option>\r\n\t\t\t\t\t\t\t\t\t\t<option value=\"RUB\">RUB</option>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t\t\t\t\tclassses={[\"blue\"]}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Создать компанию\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t\t<FadeBg onClick={e => this.props.closeModal(e, \"isOpenModalAddCompany\")}/>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t\t{/* Модальное окно для удаления/редактирования компании */}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.modals.isOpenModalUpdateCompany\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Modal>\r\n\t\t\t\t\t\t\t\t<h3 className={classes.deleteModal}>\r\n\t\t\t\t\t\t\t\t\tКарточка компании \"{this.props.nameForDelete}\"\r\n\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tthis.renderInputs(\"formUpdInputs\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<div className={classes.modalDeleteBtnBox}>\r\n\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tname=\"Удалить\"\r\n\t\t\t\t\t\t\t\t\t\tclassses={[\"red\"]}\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => this.props.deleteCompany(this.props.nameForDelete)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tname=\"Изменить\"\r\n\t\t\t\t\t\t\t\t\t\tclassses={[\"green\"]}\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.updateCompany}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t\t<FadeBg onClick={e => this.props.closeModal(e, \"isOpenModalUpdateCompany\")}/>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.mainReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\trenderCompanies: () => dispatch(renderCompanies()),\r\n\t\tcreateCompany: e => dispatch(createCompany(e)),\r\n\t\tupdateCompany: () => dispatch(updateCompany()),\r\n\t\tdeleteCompany: name => dispatch(deleteCompany(name)),\r\n\t\tclickOnCompany: e => dispatch(clickOnCompany(e)),\r\n\t\tgetCompanyData: (e, inputName, inputsObj) => dispatch(getCompanyDataChangeHandler(e, inputName, inputsObj)),\r\n\t\topenModal: (e, modalName) => dispatch(openModal(e, modalName)),\r\n\t\tcloseModal: (e, modalName) => dispatch(closeModal(e, modalName)),\r\n\t\tselectHandler: e => dispatch(selectHandler(e)),\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);","import React from \"react\";\r\nimport classes from './DepoDateAndAmount.module.scss'\r\n\r\nconst DepoDateAndAmount = props => {\r\n\tconst dep = props.depo;\r\n\t// Сознание нового массива дата-сумма\r\n\tconst newDep = dep.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n\t// Получение правильного формата даты и времени\r\n\tconst getDate = date => {\r\n\t\tconst day = new Date(date).getDate();\r\n\t\tlet month = new Date(date).toLocaleDateString(\"ru\", {month: 'long',});\r\n\r\n\t\tmonth === 'март' ? month += \"a\" : month = month.slice(0, month.length - 1) + \"я\";\r\n\r\n\t\treturn [day, month].join(' ');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t{\r\n\t\t\t\tnewDep.map((obj, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li onClick={props.onClick} data-currency={props.currency} data-year={new Date(obj.date).getFullYear()} data-id={obj.id} className={classes.li} key={index}>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{getDate(obj.date)}\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{obj.amount.toLocaleString(\"ru\")} {props.currency === 'rub' ? \"руб\" : props.currency === 'usd' ? \"$\" : null}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</React.Fragment>\r\n\r\n\t)\r\n};\r\n\r\nexport default DepoDateAndAmount;","import React from \"react\";\r\nimport classes from \"./DepoInnerWrapper.module.scss\";\r\nimport DepoDateAndAmount from \"../../../components/DepoDateAndAmount/DepoDateAndAmount\";\r\nimport {connect} from \"react-redux\";\r\n\r\n// NOTE: Оставил тут локальный стейт, так как у кажого компонента он должен быть свой. При клике это позволяет открывать каждый компонент отдельно\r\nclass DepoInnerWrapper extends React.Component {\r\n\tstate = {\r\n\t\tisOpen: false\r\n\t};\r\n\r\n\tshowMoreHandler = () => this.setState({isOpen: !this.state.isOpen});\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p onClick={this.showMoreHandler} className={classes.year}>\r\n\t\t\t\t\t{this.props.year} год\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<div className={classes.currency}>\r\n\t\t\t\t\t{this.state.isOpen\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tObject.keys(this.props.currency).map((currName, index) => {\r\n\t\t\t\t\t\t\t\t// Массив конкретной валюты (Usd или rub)\r\n\t\t\t\t\t\t\t\tconst currencyArr = this.props.currency[currName];\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={index} className={classes.DepoCurrency}>\r\n\t\t\t\t\t\t\t\t\t\t<h4 className={classes.name}>{currName === 'rub' ? \"Рубли\" : currName === \"usd\" ? \"Доллары\" : null}</h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t<DepoDateAndAmount\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.onClick}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrency={currName}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdepo={currencyArr}/>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.depositReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\t// showMoreDepoForYear: () => dispatch(showMoreDepoForYear()),\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DepoInnerWrapper)","import {CHANGE_SELECT, CLOSE_MODAL, ON_CHANGE, OPEN_MODAL, RENDER} from \"../../actions/actionsType\";\r\nimport axios from \"../../../axios/axios-settings\";\r\nimport {validateControl} from \"../../../Modules/formValidation\";\r\n\r\n// Рендер всех депозитов на страницу\r\nexport function renderDeposit() {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst response = await axios.get(`/${getState().authReducer.token}.json`);\r\n\r\n\t\ttry {\r\n\t\t\tconst showPreloader = false;\r\n\r\n\t\t\tif (response.data === null) {\r\n\t\t\t\tconst deposit = null\r\n\t\t\t\tdispatch({type: RENDER, deposit, showPreloader})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst {deposit} = response.data.portfolio;\r\n\t\t\tdispatch({type: RENDER, deposit, showPreloader})\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// сабмит формы по созданию депозита\r\nexport function createDeposit(e) {\r\n\te.preventDefault();\r\n\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().depositReducer;\r\n\t\tconst {date, amount, currency} = state.depositData;\r\n\t\tconst year = new Date(date).getFullYear();\r\n\t\tconst arr = await axios.get(`/${getState().authReducer.token}/portfolio/deposit/${year}/${currency}.json`);\r\n\t\tconst showPreloader = true;\r\n\t\tconst formAddDepoInputs = {...state.formAddDepoInputs};\r\n\t\tconst amountInput = {...formAddDepoInputs.amount};\r\n\r\n\t\tamountInput.value = \"\";\r\n\t\tformAddDepoInputs.amount = amountInput;\r\n\r\n\t\t// Если год создаем впервые\r\n\t\tif (arr.data === null) {\r\n\t\t\tconst data = [];\r\n\r\n\t\t\tdata.push({\r\n\t\t\t\tamount: +amount,\r\n\t\t\t\tdate: date,\r\n\t\t\t\tid: data.length + Math.random()\r\n\t\t\t});\r\n\r\n\t\t\tconst response = await axios.put(`/${getState().authReducer.token}/portfolio/deposit/${year}/${currency}.json`, data);\r\n\t\t\tconst isFormValid = false;\r\n\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\tdispatch({type: RENDER, showPreloader, isFormValid, formAddDepoInputs});\r\n\t\t\t\tdispatch(renderDeposit());\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Если уже имеем массив\r\n\t\tarr.data.push({\r\n\t\t\tamount: +amount,\r\n\t\t\tdate: date,\r\n\t\t\tid: arr.data.length + Math.random()\r\n\t\t});\r\n\r\n\t\tconst response = await axios.put(`/${getState().authReducer.token}/portfolio/deposit/${year}/${currency}.json`, arr.data);\r\n\t\tconst isFormValid = false;\r\n\r\n\t\tif (response.status === 200) {\r\n\t\t\tdispatch({type: RENDER, showPreloader, isFormValid, formAddDepoInputs});\r\n\t\t\tdispatch(renderDeposit());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Удаление депозита\r\nexport function deleteDeposit(e) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().depositReducer;\r\n\r\n\t\tconst showPreloader = true;\r\n\t\tconst showModal = false;\r\n\t\tconst data = {...state.data};\r\n\r\n\t\tconst response = await axios.get(`/${getState().authReducer.token}/portfolio/deposit/${data.year}/${data.currency}.json`);\r\n\r\n\t\tif (response.data.length === 0) {\r\n\t\t\tconst del = await axios.delete(`/${getState().authReducer.token}/portfolio/deposit/${data.year}/${data.currency}.json`);\r\n\r\n\t\t\tif (del.status === 200) {\r\n\t\t\t\tdispatch({type: RENDER, showPreloader, showModal});\r\n\t\t\t\tdispatch(renderDeposit());\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst result = response.data.filter(item => item.id !== +data.id);\r\n\t\t\tconst del = await axios.put(`/${getState().authReducer.token}/portfolio/deposit/${data.year}/${data.currency}.json`, result);\r\n\r\n\t\t\tif (del.status === 200) {\r\n\t\t\t\tdispatch({type: RENDER, showPreloader, showModal});\r\n\t\t\t\tdispatch(renderDeposit());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/* ----- START Открытие и закрытие модального окна -----*/\r\n\r\nexport function openModal(e) {\r\n\treturn dispatch => {\r\n\t\tconst data = e.target.dataset;\r\n\t\tconst showModal = true;\r\n\r\n\t\tdispatch({type: OPEN_MODAL, showModal, data});\r\n\t}\r\n}\r\n\r\nexport function closeModal() {\r\n\treturn dispatch => {\r\n\t\tdispatch({type: CLOSE_MODAL, showModal: false});\r\n\t}\r\n}\r\n\r\n/* ----- END Открытие и закрытие модального окна -----*/\r\n\r\n/* ----- START Все, что связано с событием onChange для инпутов, селектов и прочего -----*/\r\n\r\nexport function onChangeHandler(e, inputName, inputObj) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().depositReducer;\r\n\r\n\t\tconst depositData = {...state.depositData};\r\n\t\t// Клонирую объект с инпутами\r\n\t\tconst inputs = {...state[inputObj]};\r\n\t\t// controlName - amount, date\r\n\t\tconst controlName = {...inputs[inputName]};\r\n\r\n\t\t// Валидация\r\n\t\tcontrolName.touched = true;\r\n\t\tcontrolName.value = e.target.value;\r\n\t\tcontrolName.valid = validateControl(controlName.value, controlName.validation);\r\n\r\n\t\tdepositData[inputName] = e.target.value;\r\n\t\tinputs[inputName] = controlName;\r\n\r\n\t\tlet isFormValid = true;\r\n\r\n\t\t// Валидация формы (активные кнопки или нет)\r\n\t\tObject.keys(inputs).forEach(name => {\r\n\t\t\tisFormValid = inputs[name].valid && isFormValid;\r\n\t\t});\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: ON_CHANGE,\r\n\t\t\tdepositData,\r\n\t\t\t[inputObj]: inputs,\r\n\t\t\tisFormValid\r\n\t\t})\r\n\t}\r\n}\r\n\r\n//TODO: Пока не понял, как работает Date, починить!\r\nexport function handleChangeDate(date) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().depositReducer;\r\n\t\tconst depositData = {...state.depositData};\r\n\r\n\t\t// NOTE: Datepicker как то криво работает, пришлось использовать Date.parse\r\n\t\tdepositData.date = Date.parse(date);\r\n\t\tdispatch({type: CHANGE_SELECT, depositData});\r\n\t}\r\n}\r\n\r\nexport function selectHandler(e) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().depositReducer;\r\n\t\tconst depositData = {...state.depositData};\r\n\t\tdepositData.currency = e.target.value;\r\n\r\n\t\tdispatch({type: CHANGE_SELECT, depositData});\r\n\t}\r\n}\r\n\r\n/* ----- END Все, что связано с событием onChange для инпутов, селектов и прочего -----*/\r\n","import React from \"react\";\r\nimport classes from './Deposit.module.scss'\r\nimport {Input} from \"../../components/UI/Input/Input\";\r\nimport {Button} from \"../../components/UI/Button/Button\";\r\nimport {Preloader} from \"../../components/Preloader/Preloader\";\r\nimport {Title} from \"../../components/Title/Title\";\r\nimport {Modal} from \"../../hoc/Modal/Modal\";\r\nimport {FadeBg} from \"../../hoc/Modal/FadeBg\";\r\nimport DepoInnerWrapper from \"./DepoInnerWrapper/DepoInnerWrapper\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n\tcloseModal, createDeposit, deleteDeposit,\r\n\thandleChangeDate, onChangeHandler,\r\n\topenModal,\r\n\trenderDeposit,\r\n\tselectHandler\r\n} from \"../../redux/reducers/depositReducer/actions\";\r\n\r\n// Функции для генерации полей для инпутов\r\n\r\nclass Deposit extends React.Component {\r\n\trenderInpus(inputName) {\r\n\t\treturn Object.keys(this.props[inputName]).map((name, index) => {\r\n\t\t\tconst inputObj = this.props[inputName][name];\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tkey={name + index}\r\n\t\t\t\t\ttype={inputObj.type}\r\n\t\t\t\t\tvalue={inputObj.value}\r\n\t\t\t\t\tclasses={inputObj.className}\r\n\t\t\t\t\thtmlFor={name + index}\r\n\t\t\t\t\tvalid={inputObj.valid}\r\n\t\t\t\t\ttouched={inputObj.touched}\r\n\t\t\t\t\tlabel={inputObj.label}\r\n\t\t\t\t\tplaceholder={inputObj.placeholder}\r\n\t\t\t\t\terrorMessage={inputObj.errorMessage}\r\n\t\t\t\t\tautocomplete={inputObj.autocomplete}\r\n\t\t\t\t\tonChange={e => this.props.onChangeHandler(e, name, inputName)}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t})\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.renderDeposit();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.Deposit}>\r\n\t\t\t\t{/* Форма ввода пополнения */}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Title title=\"Список пополнений\"/>\r\n\r\n\t\t\t\t\t<h3 className={classes.infoTitle}>\r\n\t\t\t\t\t\tДобавить пополнение\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t<form onSubmit={this.props.createDeposit}>\r\n\t\t\t\t\t\t<div className={classes.inputsBox}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.renderInpus(\"formAddDepoInputs\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\tselected={this.props.depositData.date}\r\n\t\t\t\t\t\t\t\t// onChange={this.handleChangeDate}\r\n\t\t\t\t\t\t\t\tonChange={this.props.handleChangeDate}\r\n\t\t\t\t\t\t\t\tclassName={classes.datePicker}\r\n\t\t\t\t\t\t\t\tmaxDate={new Date()}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<select className={classes.select} onChange={this.props.selectHandler}>\r\n\t\t\t\t\t\t\t\t<option value=\"usd\">USD</option>\r\n\t\t\t\t\t\t\t\t<option value=\"rub\">RUB</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassses={[\"green\", \"addDepo\"]}\r\n\t\t\t\t\t\t\tname=\"Добавить пополнение\"\r\n\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/*Общий контейнер для пополнения и статистики*/}\r\n\t\t\t\t<div className={classes.depoAndStatistic}>\r\n\t\t\t\t\t{/*Пополнения по годам*/}\r\n\t\t\t\t\t<h3 className={classes.infoTitle}>Общая информация по пополнениям</h3>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.showPreloader\r\n\t\t\t\t\t\t\t? <Preloader/>\r\n\t\t\t\t\t\t\t: this.props.deposit === null\r\n\t\t\t\t\t\t\t? <div className={classes.noDeposit}> У вас пока не было пополнений </div>\r\n\t\t\t\t\t\t\t: <div className={classes.DepoYear}>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tObject.keys(this.props.deposit).map((year, index) => {\r\n\t\t\t\t\t\t\t\t\t\tconst currency = this.props.deposit[year];\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn <DepoInnerWrapper\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.props.openModal}\r\n\t\t\t\t\t\t\t\t\t\t\tcurrency={currency}\r\n\t\t\t\t\t\t\t\t\t\t\tyear={year}\r\n\t\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/*\tМодальное окно для подтверждения удаления */}\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.showModal\r\n\t\t\t\t\t\t? <React.Fragment>\r\n\t\t\t\t\t\t\t<Modal>\r\n\t\t\t\t\t\t\t\t<h2 className={classes.delModalTitle}>Вы точно хотите удалить пополнение?</h2>\r\n\t\t\t\t\t\t\t\t<div className={classes.modalButtons}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tclassses={[\"red\"]}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Удалить\"\r\n\t\t\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.deleteDeposit}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tclassses={[\"green\"]}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Отмена\"\r\n\t\t\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.props.closeModal}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t\t<FadeBg onClick={this.props.closeModal}/>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.depositReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\trenderDeposit: () => dispatch(renderDeposit()),\r\n\t\tcreateDeposit: (e) => dispatch(createDeposit(e)),\r\n\t\tdeleteDeposit: (e) => dispatch(deleteDeposit(e)),\r\n\t\topenModal: e => dispatch(openModal(e)),\r\n\t\tcloseModal: e => dispatch(closeModal(e)),\r\n\t\tonChangeHandler: (e, inputName, inputObj) => dispatch(onChangeHandler(e, inputName, inputObj)),\r\n\t\thandleChangeDate: date => dispatch(handleChangeDate(date)),\r\n\t\tselectHandler: e => dispatch(selectHandler(e)),\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Deposit)","import React from \"react\";\r\nimport classes from \"./LinksInsideSidebar.module.scss\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\nconst LinksInsideSidebar = props => {\r\n\treturn (\r\n\t\t<nav className={classes.LinksInsideSidebar}>\r\n\t\t\t<li>\r\n\t\t\t\t<NavLink to={\"/\"}> Главная </NavLink>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<NavLink to={\"/depo\"}> Пополнения </NavLink>\r\n\t\t\t</li>\r\n\t\t</nav>\r\n\t)\r\n};\r\n\r\nexport default LinksInsideSidebar;","import React from \"react\";\r\nimport classes from './SidebarNavigation.module.scss'\r\nimport LinksInsideSidebar from \"../LinksInsideSidebar/LinksInsideSidebar\";\r\n\r\nfunction SidebarNavigation() {\r\n\treturn (\r\n\t\t<div className={classes.SidebarNavigation}>\r\n\t\t\t<LinksInsideSidebar/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default SidebarNavigation","import React from \"react\";\r\nimport classes from './Header.module.scss'\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/reducers/authReducer/actions\";\r\n\r\nconst Header = props => {\r\n\treturn (\r\n\t\t<div className={classes.Header}>\r\n\t\t\t<div>\r\n\t\t\t\tFinance Journal\r\n\t\t\t</div>\r\n\t\t\t{\r\n\t\t\t\tprops.token !== null\r\n\t\t\t\t\t?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<a onClick={props.logout} className={classes.logoutLink} href=\"#\">Выйти</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: null\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.authReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tlogout: (e) => dispatch(logout(e)),\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","import {validateControl} from \"../../../Modules/formValidation\";\r\nimport {AUTH_AUTO_LOGIN, AUTH_INPUT, AUTH_LOGIN, AUTH_LOGOUT} from \"../../actions/actionsType\";\r\nimport axios from \"axios\"\r\n\r\nexport function loginHandler(isLogin) {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst state = getState().authReducer;\r\n\t\tconst {inputEmail, inputPassword} = state.authInputs;\r\n\t\tconst data = {\r\n\t\t\temail: inputEmail.value,\r\n\t\t\tpassword: inputPassword.value,\r\n\t\t\treturnSecureToken: true\r\n\t\t};\r\n\r\n\t\tlet url, response;\r\n\r\n\t\tif (isLogin) {\r\n\t\t\turl = \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB73IC7XvE6QjjTcMWXZNePBcn_uiLgqWA\"\r\n\t\t\tresponse = await axios.post(url, data)\r\n\t\t} else {\r\n\t\t\t// Sign up (регистрация)\r\n\t\t\turl = \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyB73IC7XvE6QjjTcMWXZNePBcn_uiLgqWA\";\r\n\t\t\tresponse = await axios.post(url, data)\r\n\t\t}\r\n\r\n\t\tdispatch({type: AUTH_LOGIN, token: response.data.localId});\r\n\r\n\t\tlocalStorage.setItem(\"localID\", response.data.localId)\r\n\r\n\t}\r\n}\r\n\r\nexport function authForm(e) {\r\n\te.preventDefault();\r\n\treturn dispatch => {\r\n\r\n\t}\r\n}\r\n\r\nexport function authChangeHandler(e, inputObj, inputName) {\r\n\treturn (dispatch, getState) => {\r\n\t\tconst state = getState().authReducer;\r\n\t\tconst authInputs = {...state[inputObj]};\r\n\t\tconst input = {...authInputs[inputName]};\r\n\r\n\t\tinput.touched = true;\r\n\t\tinput.value = e.target.value;\r\n\t\tinput.valid = validateControl(input.value, input.validation);\r\n\r\n\t\tauthInputs[inputName] = input;\r\n\r\n\t\tlet isFormValid = true;\r\n\t\t// Валидация формы (активные кнопки или нет)\r\n\r\n\t\tObject.keys(authInputs).forEach(name => {\r\n\t\t\tisFormValid = authInputs[name].valid && isFormValid;\r\n\t\t});\r\n\r\n\t\tdispatch({type: AUTH_INPUT, [inputObj]: authInputs, isFormValid})\r\n\t}\r\n}\r\n\r\nexport function autoLogin() {\r\n\treturn dispatch => {\r\n\t\tconst localID = localStorage.getItem(\"localID\");\r\n\r\n\t\tif (localID) {\r\n\t\t\tdispatch({type: AUTH_AUTO_LOGIN, token: localID})\r\n\t\t} else {\r\n\t\t\tdispatch({type: AUTH_AUTO_LOGIN, token: null})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function logout(e) {\r\n\te.preventDefault();\r\n\r\n\treturn dispatch => {\r\n\t\tlocalStorage.removeItem(\"localID\");\r\n\t\tdispatch({type: AUTH_LOGOUT})\r\n\t}\r\n}","import React from \"react\";\r\nimport classes from \"./Auth.module.scss\"\r\nimport {connect} from \"react-redux\";\r\nimport {Input} from \"../../components/UI/Input/Input\";\r\nimport {\r\n\tauthChangeHandler,\r\n\tauthForm,\r\n\tloginHandler\r\n} from \"../../redux/reducers/authReducer/actions\";\r\nimport {Title} from \"../../components/Title/Title\";\r\nimport {Button} from \"../../components/UI/Button/Button\";\r\n\r\nclass Auth extends React.Component {\r\n\trenderInput(inputObj) {\r\n\r\n\t\treturn Object.keys(this.props[inputObj]).map((inputName, index) => {\r\n\t\t\tconst input = this.props[inputObj][inputName];\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<Input\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\ttype={input.type}\r\n\t\t\t\t\tlabel={input.label}\r\n\t\t\t\t\terrorMessage={input.errorMessage}\r\n\t\t\t\t\tclassName={input.className}\r\n\t\t\t\t\tplaceholder={input.placeholder}\r\n\t\t\t\t\tvalid={input.valid}\r\n\t\t\t\t\ttouched={input.touched}\r\n\t\t\t\t\tvalue={input.value}\r\n\t\t\t\t\tvalidation={input.validation}\r\n\t\t\t\t\tonChange={e => this.props.authChangeHandler(e, inputObj, inputName)}\r\n\t\t\t\t/>)\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={classes.Auth}>\r\n\t\t\t\t<Title title={\"Добро пожаловать!\"}/>\r\n\t\t\t\t<p className={classes.greetings}>Пожалуйста, войдите в систему или зарегистрируйтесь</p>\r\n\r\n\t\t\t\t<div className={classes.authForm}>\r\n\t\t\t\t\t<form onSubmit={this.props.authForm}>\r\n\t\t\t\t\t\t{this.renderInput(\"authInputs\")}\r\n\r\n\t\t\t\t\t\t<div className={classes.btnContainer}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassses={[\"green\", \"authEntry\"]}\r\n\t\t\t\t\t\t\t\tname=\"Войти\"\r\n\t\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t\t\tonClick={this.props.loginHandler.bind(this, true)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassses={[\"yellow\", \"authReg\"]}\r\n\t\t\t\t\t\t\t\tname=\"Регистрация\"\r\n\t\t\t\t\t\t\t\tdisabled={this.props.isFormValid}\r\n\t\t\t\t\t\t\t\tonClick={this.props.loginHandler.bind(this, false)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.authReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tauthChangeHandler: (e, inputObj, inputName) => dispatch(authChangeHandler(e, inputObj, inputName)),\r\n\t\tauthForm: (e) => dispatch(authForm(e)),\r\n\t\tloginHandler: (isLogin) => dispatch(loginHandler(isLogin))\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth)","import React, {Component} from \"react\";\r\nimport \"./App.scss\";\r\nimport Layout from \"./hoc/Layout/Layout\";\r\nimport Main from \"./container/Main/Main\";\r\nimport Deposit from \"./container/Deposit/Deposit\";\r\nimport SidebarNavigation from \"./components/SidebarNavigation/SidebarNavigation\";\r\nimport Header from \"./components/Header/Header\";\r\nimport {Route, Switch, Redirect} from \"react-router-dom\"\r\nimport {connect} from \"react-redux\";\r\nimport Auth from \"./container/Auth/Auth\";\r\nimport {autoLogin} from \"./redux/reducers/authReducer/actions\";\r\n\r\nclass App extends Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.autoLogin();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Layout>\r\n\t\t\t\t<Header/>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.token\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t<div className=\"main-page-wrapper\">\r\n\t\t\t\t\t\t\t<SidebarNavigation/>\r\n\r\n\t\t\t\t\t\t\t<div className={'main-page-content'}>\r\n\t\t\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t\t<Route exact={true} path={\"/\"} component={Main}/>\r\n\t\t\t\t\t\t\t\t\t<Route path={\"/depo\"} component={Deposit}/>\r\n\t\t\t\t\t\t\t\t\t<Redirect to={\"/\"} component={Main}/>\r\n\t\t\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<div className=\"main-page-wrapper\">\r\n\t\t\t\t\t\t\t<Route>\r\n\t\t\t\t\t\t\t\t<Route exact path={\"/auth\"} component={Auth}/>\r\n\t\t\t\t\t\t\t\t<Redirect to={\"/auth\"} component={Auth}/>\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</Layout>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\t// Глубокое копирование\r\n\treturn JSON.parse(JSON.stringify(state.authReducer))\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\treturn {\r\n\t\tautoLogin: () => dispatch(autoLogin()),\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {createAddFormInputs, createUpdFormInputs} from \"../../../Modules/formValidation\";\r\nimport {\r\n\tCHANGE_SELECT,\r\n\tCLOSE_MODAL,\r\n\tCREATE_COMPANY,\r\n\tCURRENCY,\r\n\tGET_COMPANY_DATA,\r\n\tOPEN_MODAL_UPDATE,\r\n\tRENDER, SHOW_PRELOADER\r\n} from \"../../actions/actionsType\";\r\n\r\n// Функции создания инпутов\r\nfunction createOptionForAddInputs(name, errMessage, obj) {\r\n\treturn createAddFormInputs({\r\n\t\t\tlabel: name,\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: errMessage,\r\n\t\t\tclassName: [\"\"],\r\n\t\t\tautocomplete: \"off\"\r\n\t\t}, obj\r\n\t)\r\n}\r\n\r\nfunction createOptionForUpdInputs(name, errMessage, obj) {\r\n\treturn createUpdFormInputs({\r\n\t\t\tlabel: name,\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: errMessage,\r\n\t\t\tclassName: [\"\"],\r\n\t\t\tautocomplete: \"off\"\r\n\t\t}, obj\r\n\t)\r\n}\r\n\r\nconst initState = {\r\n\t// user: \"aHmcqjPPBwXvW397FPL31TtkwfJ3\",\r\n\tuser: null,\r\n\tnameForDelete: \"\",\r\n\tshowPreloader: true,\r\n\tisFormValid: false,\r\n\tmodals: {\r\n\t\tisOpenModalAddCompany: false,\r\n\t\tisOpenModalUpdateCompany: false\r\n\t},\r\n\tformAddInputs: {\r\n\t\tname: createOptionForAddInputs(\"Имя компании\", \"Поле не может быть пустым\", {required: true}),\r\n\t\tcount: createOptionForAddInputs(\"Количество акций\", \"Введите число\", {required: true, type: \"number\"}),\r\n\t\tdividendPerShare: createOptionForAddInputs(\"Размер дивидендов (в год)\", \"Введите число\", {\r\n\t\t\trequired: true,\r\n\t\t\ttype: \"number\"\r\n\t\t})\r\n\t},\r\n\tformUpdInputs: {\r\n\t\tcount: createOptionForUpdInputs(\"Количество акций\", \"Введите число\", {required: true, type: \"number\"}),\r\n\t\tdividendPerShare: createOptionForUpdInputs(\"Размер дивидендов (в год)\", \"Введите число\", {\r\n\t\t\trequired: true,\r\n\t\t\ttype: \"number\"\r\n\t\t})\r\n\t},\r\n\tcompany: {\r\n\t\tname: \"\",\r\n\t\tcount: \"\",\r\n\t\tdividendPerShare: \"\",\r\n\t\tcurrency: \"USD\"\r\n\t},\r\n\tcompanies: {},\r\n\tcurrency: [],\r\n};\r\n\r\n//Всегда возвращаем новый объект, сохраняем иммутабельность\r\n// В редюсерах по сути мы обновляем стейт. В action передаем то, что нужно обновить\r\n\r\nexport default function mainReducer(state = initState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase RENDER: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase CURRENCY:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrency: action.currency\r\n\t\t\t};\r\n\r\n\t\tcase CREATE_COMPANY:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcompany: action.company,\r\n\t\t\t\tmodals: action.modals,\r\n\t\t\t\tformAddInputs: action.formAddInputs\r\n\t\t\t};\r\n\r\n\t\tcase SHOW_PRELOADER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshowPreloader: true\r\n\t\t\t};\r\n\r\n\t\tcase GET_COMPANY_DATA:\r\n\t\t\treturn {...state, ...action};\r\n\r\n\t\tcase OPEN_MODAL_UPDATE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmodals: action.modals,\r\n\t\t\t\tnameForDelete: action.nameForDelete\r\n\t\t\t};\r\n\r\n\t\tcase CLOSE_MODAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmodals: action.modals,\r\n\t\t\t\tformAddInputs: action.formAddInputs,\r\n\t\t\t\tisFormValid: action.isFormValid\r\n\t\t\t};\r\n\r\n\t\tcase CHANGE_SELECT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcompany: action.company\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// Функция открытия модального окна\r\n","import {CHANGE_SELECT, CLOSE_MODAL, ON_CHANGE, OPEN_MODAL, RENDER} from \"../../actions/actionsType\";\r\n\r\nconst initState = {\r\n\t// user: \"aHmcqjPPBwXvW397FPL31TtkwfJ3\",\r\n\tuser: null,\r\n\tisFormValid: false,\r\n\tshowModal: false,\r\n\tshowPreloader: true,\r\n\tdeposit: {},\r\n\tformAddDepoInputs: {\r\n\t\tamount: {\r\n\t\t\ttype: \"text\",\r\n\t\t\terrorMessage: \"Введите число\",\r\n\t\t\tclassName: [\"depositInput\"],\r\n\t\t\tplaceholder: \"Введите сумму\",\r\n\t\t\tautocomplete: \"off\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalue: \"\",\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: \"number\"\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tdepositData: {\r\n\t\tcurrency: \"usd\",\r\n\t\tamount: \"\",\r\n\t\tdate: Date.parse(new Date)\r\n\t},\r\n\tdata: {},\r\n\tisOpen: false\r\n};\r\n\r\nexport default function depositReducer(state = initState, action) {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase RENDER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t};\r\n\t\tcase OPEN_MODAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t};\r\n\t\tcase CLOSE_MODAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshowModal: false\r\n\t\t\t};\r\n\t\tcase ON_CHANGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t};\r\n\t\tcase CHANGE_SELECT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import {AUTH_AUTO_LOGIN, AUTH_INPUT, AUTH_LOGIN, AUTH_LOGOUT} from \"../../actions/actionsType\";\r\n\r\nconst initState = {\r\n\ttoken: null,\r\n\tisFormValid: false,\r\n\tauthInputs: {\r\n\t\tinputEmail: {\r\n\t\t\ttype: \"email\",\r\n\t\t\tlabel: \"Введите e-mail\",\r\n\t\t\terrorMessage: \"Введите e-mail\",\r\n\t\t\tclassName: [\"authLogin\"],\r\n\t\t\tplaceholder: \"Введите e-mail\",\r\n\t\t\tautocomplete: \"off\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalue: \"\",\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: \"email\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tinputPassword: {\r\n\t\t\ttype: \"password\",\r\n\t\t\tlabel: \"Введите пароль\",\r\n\t\t\terrorMessage: \"Пароль не может быть менее 6 символов\",\r\n\t\t\tclassName: [\"authLogin\"],\r\n\t\t\tplaceholder: \"Введите пароль\",\r\n\t\t\tautocomplete: \"off\",\r\n\t\t\tvalid: false,\r\n\t\t\ttouched: false,\r\n\t\t\tvalue: \"\",\r\n\t\t\tvalidation: {\r\n\t\t\t\trequired: true,\r\n\t\t\t\tminLength: 6\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n};\r\n\r\nexport default function authReducer(state = initState, action) {\r\n\tswitch (action.type) {\r\n\t\tcase AUTH_INPUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action\r\n\t\t\t};\r\n\t\tcase AUTH_LOGIN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: action.token\r\n\t\t\t};\r\n\t\tcase AUTH_AUTO_LOGIN:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: action.token\r\n\t\t\t};\r\n\t\tcase AUTH_LOGOUT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttoken: null\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import mainReducer from \"./mainReducer/mainReducer\";\r\nimport depositReducer from \"./depositReducer/depositReducer\";\r\nimport {combineReducers} from \"redux\"\r\nimport authReducer from \"./authReducer/authReducer\";\r\n\r\nexport default combineReducers({\r\n\tmainReducer, depositReducer, authReducer\r\n});","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.scss\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport {BrowserRouter} from \"react-router-dom\";\r\n// redux\r\nimport {createStore, compose, applyMiddleware} from \"redux\"\r\nimport {Provider} from \"react-redux\"\r\nimport rootReducer from \"./redux/reducers/rootReducers\";\r\nimport thunk from \"redux-thunk\";\r\n\r\n// Настройка redux devtools\r\nconst composeEnhancers =\r\n\ttypeof window === 'object' &&\r\n\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\r\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n\t\t}) : compose;\r\n\r\n// Создаем общий store, в него мы передаем reducer\r\n//reducer - это просто функция, которая меняет state через dispatch\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\n// Обернул все приложение в Provider, чтобы связать redux и react. Передал общий store, теперь он доступен через props\r\n\r\nconst app = (\r\n\t<Provider store={store}>\r\n\t\t<BrowserRouter>\r\n\t\t\t<App/>\r\n\t\t</BrowserRouter>\r\n\t</Provider>\r\n);\r\n\r\nReactDOM.render(app, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"infoTitle\":\"Deposit_infoTitle__1o1Ty\",\"depoAndStatistic\":\"Deposit_depoAndStatistic__3URpZ\",\"addInputWrapper\":\"Deposit_addInputWrapper__10Vxq\",\"inputsBox\":\"Deposit_inputsBox__2QTBw\",\"datePicker\":\"Deposit_datePicker__2Af0v\",\"select\":\"Deposit_select__TmJnj\",\"DepoYear\":\"Deposit_DepoYear__2IYYy\",\"noDeposit\":\"Deposit_noDeposit__1RJZw\",\"modalButtons\":\"Deposit_modalButtons__vGO6T\",\"delModalTitle\":\"Deposit_delModalTitle__-lxPU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"Main_Main__nqTMN\",\"MainModalTitle\":\"Main_MainModalTitle__qnLIa\",\"MaindeleteModal\":\"Main_MaindeleteModal__1qg2h\",\"addSection\":\"Main_addSection__1HoBv\",\"modalDeleteBtnBox\":\"Main_modalDeleteBtnBox__vtkJH\",\"deleteModal\":\"Main_deleteModal__1xfYO\",\"tableWrapper\":\"Main_tableWrapper__390c2\",\"infoTitle\":\"Main_infoTitle__nMyIU\",\"noCompany\":\"Main_noCompany__VuEXH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"CompaniesList_row__tp4nF\",\"header\":\"CompaniesList_header__1z49L\",\"CompanyName\":\"CompaniesList_CompanyName__2aWj7\",\"Total\":\"CompaniesList_Total__3hGTS\",\"afterTax\":\"CompaniesList_afterTax__BpW_O\",\"Actions\":\"CompaniesList_Actions__9R6TN\",\"LinksInsideSidebar\":\"CompaniesList_LinksInsideSidebar__1nakK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__2quG7\",\"InputWrapper\":\"Input_InputWrapper__3uapM\",\"Error\":\"Input_Error__29Muj\",\"redText\":\"Input_redText__1IoDx\",\"depositInput\":\"Input_depositInput__3CU92\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__7fSAt\",\"FadeBg\":\"Modal_FadeBg__2Imzt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"year\":\"DepoInnerWrapper_year__2KZ8M\",\"currency\":\"DepoInnerWrapper_currency__1A39Z\",\"DepoCurrency\":\"DepoInnerWrapper_DepoCurrency__2aLag\",\"name\":\"DepoInnerWrapper_name__3hsAY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__IpAGL\",\"mainTitle\":\"Auth_mainTitle__aH4nf\",\"greetings\":\"Auth_greetings__2uHv6\",\"authForm\":\"Auth_authForm__Yy_6p\",\"btnContainer\":\"Auth_btnContainer__1zDFt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Title\":\"Title_Title__2Z_yt\",\"titleH\":\"Title_titleH__eupkD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3bOL9\",\"green\":\"Button_green__3e1jU\",\"blue\":\"Button_blue__sg7FF\",\"yellow\":\"Button_yellow__t73An\",\"red\":\"Button_red__17dDb\",\"addDepo\":\"Button_addDepo__bhl6g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__B089z\",\"logoutLink\":\"Header_logoutLink__2y4NX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layout\":\"Layout_Layout__Jfo2K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Preloader\":\"Preloader_Preloader__12uMJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"li\":\"DepoDateAndAmount_li__2gAp1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SidebarNavigation\":\"SidebarNavigation_SidebarNavigation__2VT4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LinksInsideSidebar\":\"LinksInsideSidebar_LinksInsideSidebar__1Lcd2\"};"],"sourceRoot":""}